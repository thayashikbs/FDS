<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 R言語の基本 | 金融データサイエンス</title>
  <meta name="description" content="2 R言語の基本 | 金融データサイエンス" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="2 R言語の基本 | 金融データサイエンス" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 R言語の基本 | 金融データサイエンス" />
  
  
  

<meta name="author" content="林 高樹" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="線形回帰分析.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> はじめに</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#コースの目的"><i class="fa fa-check"></i><b>1.1</b> コースの目的</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#統計学統計的手法の学習について"><i class="fa fa-check"></i><b>1.2</b> 統計学/統計的手法の学習について</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#学習の目標"><i class="fa fa-check"></i>学習の目標</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#統計学統計的手法の学習方法"><i class="fa fa-check"></i>統計学/統計的手法の学習方法</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#統計学統計的手法の学習ステップ"><i class="fa fa-check"></i>統計学/統計的手法の学習ステップ</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#ビジネス応用における統計学の最近の趨勢"><i class="fa fa-check"></i><b>1.3</b> ビジネス応用における統計学の最近の趨勢</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#本書内の記載の注意点"><i class="fa fa-check"></i><b>1.4</b> 本書内の記載の注意点</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r言語の基本.html"><a href="r言語の基本.html"><i class="fa fa-check"></i><b>2</b> R言語の基本</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r言語の基本.html"><a href="r言語の基本.html#rの基本プログラミング"><i class="fa fa-check"></i><b>2.1</b> Rの基本プログラミング</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="r言語の基本.html"><a href="r言語の基本.html#基本操作"><i class="fa fa-check"></i><b>2.1.1</b> 基本操作</a></li>
<li class="chapter" data-level="2.1.2" data-path="r言語の基本.html"><a href="r言語の基本.html#基本構文"><i class="fa fa-check"></i><b>2.1.2</b> 基本構文</a></li>
<li class="chapter" data-level="2.1.3" data-path="r言語の基本.html"><a href="r言語の基本.html#自作関数"><i class="fa fa-check"></i><b>2.1.3</b> 自作関数</a></li>
<li class="chapter" data-level="2.1.4" data-path="r言語の基本.html"><a href="r言語の基本.html#パッケージのインストール-読み込み"><i class="fa fa-check"></i><b>2.1.4</b> パッケージのインストール &amp; 読み込み</a></li>
<li class="chapter" data-level="2.1.5" data-path="r言語の基本.html"><a href="r言語の基本.html#ヘルプ"><i class="fa fa-check"></i><b>2.1.5</b> ヘルプ</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r言語の基本.html"><a href="r言語の基本.html#データの型や構造"><i class="fa fa-check"></i><b>2.2</b> データの型や構造</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r言語の基本.html"><a href="r言語の基本.html#データの値の種類-データ型"><i class="fa fa-check"></i><b>2.2.1</b> データの値の種類 (“データ型”)</a></li>
<li class="chapter" data-level="2.2.2" data-path="r言語の基本.html"><a href="r言語の基本.html#データの配列の仕方-データ構造"><i class="fa fa-check"></i><b>2.2.2</b> データの配列の仕方 (“データ構造”)</a></li>
<li class="chapter" data-level="2.2.3" data-path="r言語の基本.html"><a href="r言語の基本.html#ベクトル"><i class="fa fa-check"></i><b>2.2.3</b> ベクトル</a></li>
<li class="chapter" data-level="2.2.4" data-path="r言語の基本.html"><a href="r言語の基本.html#行列"><i class="fa fa-check"></i><b>2.2.4</b> 行列</a></li>
<li class="chapter" data-level="2.2.5" data-path="r言語の基本.html"><a href="r言語の基本.html#リスト"><i class="fa fa-check"></i><b>2.2.5</b> リスト</a></li>
<li class="chapter" data-level="2.2.6" data-path="r言語の基本.html"><a href="r言語の基本.html#データフレーム"><i class="fa fa-check"></i><b>2.2.6</b> データフレーム</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r言語の基本.html"><a href="r言語の基本.html#データの操作演算"><i class="fa fa-check"></i><b>2.3</b> データの操作・演算</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r言語の基本.html"><a href="r言語の基本.html#ベクトルの結合-ソート"><i class="fa fa-check"></i><b>2.3.1</b> ベクトルの結合, ソート</a></li>
<li class="chapter" data-level="2.3.2" data-path="r言語の基本.html"><a href="r言語の基本.html#二項演算"><i class="fa fa-check"></i><b>2.3.2</b> 二項演算</a></li>
<li class="chapter" data-level="2.3.3" data-path="r言語の基本.html"><a href="r言語の基本.html#論理演算"><i class="fa fa-check"></i><b>2.3.3</b> 論理演算</a></li>
<li class="chapter" data-level="2.3.4" data-path="r言語の基本.html"><a href="r言語の基本.html#条件式"><i class="fa fa-check"></i><b>2.3.4</b> 条件式</a></li>
<li class="chapter" data-level="2.3.5" data-path="r言語の基本.html"><a href="r言語の基本.html#行列演算"><i class="fa fa-check"></i><b>2.3.5</b> 行列演算</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="r言語の基本.html"><a href="r言語の基本.html#r関数"><i class="fa fa-check"></i><b>2.4</b> R関数</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="r言語の基本.html"><a href="r言語の基本.html#数学基本関数"><i class="fa fa-check"></i><b>2.4.1</b> 数学基本関数</a></li>
<li class="chapter" data-level="2.4.2" data-path="r言語の基本.html"><a href="r言語の基本.html#基本統計量の計算"><i class="fa fa-check"></i><b>2.4.2</b> 基本統計量の計算</a></li>
<li class="chapter" data-level="2.4.3" data-path="r言語の基本.html"><a href="r言語の基本.html#確率分布"><i class="fa fa-check"></i><b>2.4.3</b> 確率分布</a></li>
<li class="chapter" data-level="2.4.4" data-path="r言語の基本.html"><a href="r言語の基本.html#その他便利な関数"><i class="fa fa-check"></i><b>2.4.4</b> その他便利な関数</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r言語の基本.html"><a href="r言語の基本.html#データの可視化"><i class="fa fa-check"></i><b>2.5</b> データの可視化</a></li>
<li class="chapter" data-level="2.6" data-path="r言語の基本.html"><a href="r言語の基本.html#ファイル入出力"><i class="fa fa-check"></i><b>2.6</b> ファイル入出力</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="r言語の基本.html"><a href="r言語の基本.html#テキストファイル読み込み"><i class="fa fa-check"></i><b>2.6.1</b> テキストファイル読み込み</a></li>
<li class="chapter" data-level="2.6.2" data-path="r言語の基本.html"><a href="r言語の基本.html#テキストファイル書き出し"><i class="fa fa-check"></i><b>2.6.2</b> テキストファイル書き出し</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="r言語の基本.html"><a href="r言語の基本.html#パッケージtidyverse"><i class="fa fa-check"></i><b>2.7</b> パッケージ<code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="r言語の基本.html"><a href="r言語の基本.html#q-rの初心者はtidyverseから勉強することは可能か"><i class="fa fa-check"></i><b>2.7.1</b> Q: Rの初心者は<code>tidyverse</code>から勉強することは可能か?</a></li>
<li class="chapter" data-level="2.7.2" data-path="r言語の基本.html"><a href="r言語の基本.html#tidyverseの基本"><i class="fa fa-check"></i><b>2.7.2</b> <code>tidyverse</code>の基本</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="線形回帰分析.html"><a href="線形回帰分析.html"><i class="fa fa-check"></i><b>3</b> 線形回帰分析</a>
<ul>
<li class="chapter" data-level="3.1" data-path="線形回帰分析.html"><a href="線形回帰分析.html#重回帰分析の基本操作"><i class="fa fa-check"></i><b>3.1</b> 重回帰分析の基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データ1-1ルーム賃貸マンション"><i class="fa fa-check"></i>データ1: 1ルーム賃貸マンション</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="線形回帰分析.html"><a href="線形回帰分析.html#変数の選択"><i class="fa fa-check"></i><b>3.2</b> 変数の選択</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データ2-ボストン市内住宅物件価格データ"><i class="fa fa-check"></i>データ2: ボストン市内住宅物件価格データ</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="線形回帰分析.html"><a href="線形回帰分析.html#説明変数に質的変数を含む回帰"><i class="fa fa-check"></i><b>3.3</b> 説明変数に質的変数を含む回帰</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データセット3-高速道路事故データ"><i class="fa fa-check"></i>データセット#3: 高速道路事故データ</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="線形回帰分析.html"><a href="線形回帰分析.html#説明変数に質的変数を含む回帰-2"><i class="fa fa-check"></i><b>3.4</b> 説明変数に質的変数を含む回帰 (2)</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データセット5-収入データ-仮想"><i class="fa fa-check"></i>データセット#5: 収入データ (仮想)</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="線形回帰分析.html"><a href="線形回帰分析.html#多項式回帰"><i class="fa fa-check"></i><b>3.5</b> 多項式回帰</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#データセット6-wage"><i class="fa fa-check"></i>データセット#6: <code>Wage</code></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="線形回帰分析.html"><a href="線形回帰分析.html#関数factorについて"><i class="fa fa-check"></i><b>3.6</b> 関数<code>factor()</code>について</a>
<ul>
<li class="chapter" data-level="" data-path="線形回帰分析.html"><a href="線形回帰分析.html#rでのfactor関数の使い方"><i class="fa fa-check"></i>Rでのfactor関数の使い方</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html"><i class="fa fa-check"></i><b>4</b> ロジット/ブロビット回帰分析</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#ロジット回帰分析の基本操作"><i class="fa fa-check"></i><b>4.1</b> ロジット回帰分析の基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#ロジットモデル-シミュレーションデータ"><i class="fa fa-check"></i>ロジットモデル: シミュレーションデータ</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#データ分析例"><i class="fa fa-check"></i><b>4.2</b> データ分析例</a>
<ul>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#データセット-1-企業パフォーマンスデータ-仮想"><i class="fa fa-check"></i>データセット (1): 企業パフォーマンス・データ (仮想)</a></li>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#データセット-2-個人ローンデフォルトデータ-仮想"><i class="fa fa-check"></i>データセット (2): 個人ローン・デフォルト・データ (仮想)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#疑似r2の計算"><i class="fa fa-check"></i><b>4.3</b> 疑似R2の計算</a>
<ul>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#パッケージdesctoolsの利用"><i class="fa fa-check"></i>パッケージ<code>DescTools</code>の利用</a></li>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#パッケージpsclの利用"><i class="fa fa-check"></i>パッケージ<code>pscl</code>の利用</a></li>
<li class="chapter" data-level="" data-path="ロジットブロビット回帰分析.html"><a href="ロジットブロビット回帰分析.html#パッケージperformanceの利用"><i class="fa fa-check"></i>パッケージ<code>performance</code>の利用</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="一般化加法モデル-gam.html"><a href="一般化加法モデル-gam.html"><i class="fa fa-check"></i><b>5</b> 一般化加法モデル (GAM)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="一般化加法モデル-gam.html"><a href="一般化加法モデル-gam.html#パッケージgamの利用"><i class="fa fa-check"></i><b>5.1</b> パッケージ<code>gam</code>の利用</a>
<ul>
<li class="chapter" data-level="" data-path="一般化加法モデル-gam.html"><a href="一般化加法モデル-gam.html#多項式回帰-1"><i class="fa fa-check"></i>多項式回帰</a></li>
<li class="chapter" data-level="" data-path="一般化加法モデル-gam.html"><a href="一般化加法モデル-gam.html#スプライン適合"><i class="fa fa-check"></i>スプライン適合</a></li>
<li class="chapter" data-level="" data-path="一般化加法モデル-gam.html"><a href="一般化加法モデル-gam.html#gam"><i class="fa fa-check"></i>GAM</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="一般化加法モデル-gam.html"><a href="一般化加法モデル-gam.html#パッケージmgcvの利用"><i class="fa fa-check"></i><b>5.2</b> パッケージ<code>mgcv</code>の利用</a></li>
<li class="chapter" data-level="5.3" data-path="一般化加法モデル-gam.html"><a href="一般化加法モデル-gam.html#パッケージprophetの利用"><i class="fa fa-check"></i><b>5.3</b> パッケージ<code>prophet</code>の利用</a></li>
<li class="chapter" data-level="5.4" data-path="一般化加法モデル-gam.html"><a href="一般化加法モデル-gam.html#追加分析boston-housingデータセットの変数間の関係性"><i class="fa fa-check"></i><b>5.4</b> 【追加分析】Boston housingデータセットの変数間の関係性</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html"><i class="fa fa-check"></i><b>6</b> 正則化回帰 (lasso, ridge回帰, elastic net)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#検証用セット法による回帰モデルの予測精度評価"><i class="fa fa-check"></i><b>6.1</b> 検証用セット法による回帰モデルの予測精度評価</a>
<ul>
<li class="chapter" data-level="" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#データセット1-ワイン品質データ"><i class="fa fa-check"></i>データセット1: ワイン品質データ</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#lasso"><i class="fa fa-check"></i><b>6.2</b> lasso</a>
<ul>
<li class="chapter" data-level="" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#関数glmnetの基本操作"><i class="fa fa-check"></i>関数<code>glmnet()</code>の基本操作</a></li>
<li class="chapter" data-level="" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#lambdaのグリッド指定によるglmnetの一括実行"><i class="fa fa-check"></i><code>lambda</code>のグリッド指定による<code>glmnet</code>の一括実行</a></li>
<li class="chapter" data-level="" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#交差検証によるパラメータチューニング"><i class="fa fa-check"></i>交差検証によるパラメータ・チューニング</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#ridge回帰"><i class="fa fa-check"></i><b>6.3</b> ridge回帰</a></li>
<li class="chapter" data-level="6.4" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#一般化線形モデル-glm-正則化"><i class="fa fa-check"></i><b>6.4</b> 一般化線形モデル (GLM) + 正則化</a>
<ul>
<li class="chapter" data-level="" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#データセット2-german-creditデータ"><i class="fa fa-check"></i>データセット2: german creditデータ</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="正則化回帰-lasso-ridge回帰-elastic-net.html"><a href="正則化回帰-lasso-ridge回帰-elastic-net.html#補足-glmに対する変数選択の代替的方法"><i class="fa fa-check"></i><b>6.5</b> 補足: GLMに対する変数選択の代替的方法</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="判別分析.html"><a href="判別分析.html"><i class="fa fa-check"></i><b>7</b> 判別分析</a>
<ul>
<li class="chapter" data-level="7.1" data-path="判別分析.html"><a href="判別分析.html#線形判別-2次判別-パッケージmassの利用"><i class="fa fa-check"></i><b>7.1</b> 線形判別 &amp; 2次判別: パッケージMASSの利用</a>
<ul>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#データセット1-米国sp500日次リターンデータ"><i class="fa fa-check"></i>データセット#1: 米国S&amp;P500日次リターンデータ</a></li>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#線形判別-lda"><i class="fa fa-check"></i>線形判別 (LDA)</a></li>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#次判別-qda"><i class="fa fa-check"></i>2次判別 (QDA)</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="判別分析.html"><a href="判別分析.html#knn法-パッケージclassの利用"><i class="fa fa-check"></i><b>7.2</b> kNN法: パッケージ<strong>class</strong>の利用</a></li>
<li class="chapter" data-level="7.3" data-path="判別分析.html"><a href="判別分析.html#他パッケージの利用-パッケージklar"><i class="fa fa-check"></i><b>7.3</b> 他パッケージの利用: パッケージ<strong>klaR</strong></a>
<ul>
<li class="chapter" data-level="" data-path="判別分析.html"><a href="判別分析.html#データセット2-ビジネススクールの入学許可データ"><i class="fa fa-check"></i>データセット#2: ビジネススクールの入学許可データ</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="決定木分析.html"><a href="決定木分析.html"><i class="fa fa-check"></i><b>8</b> 決定木分析</a>
<ul>
<li class="chapter" data-level="8.1" data-path="決定木分析.html"><a href="決定木分析.html#導入-回帰木-vs-線形回帰"><i class="fa fa-check"></i><b>8.1</b> 導入: 回帰木 vs 線形回帰</a>
<ul>
<li class="chapter" data-level="" data-path="決定木分析.html"><a href="決定木分析.html#データセット1-自動車の制動距離"><i class="fa fa-check"></i>データセット1: 自動車の制動距離</a></li>
<li class="chapter" data-level="8.1.1" data-path="決定木分析.html"><a href="決定木分析.html#基本操作-回帰木"><i class="fa fa-check"></i><b>8.1.1</b> 基本操作: 回帰木</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="決定木分析.html"><a href="決定木分析.html#回帰木"><i class="fa fa-check"></i><b>8.2</b> 回帰木</a>
<ul>
<li class="chapter" data-level="" data-path="決定木分析.html"><a href="決定木分析.html#データセット2-米國株価指数データ-再掲"><i class="fa fa-check"></i>データセット2: 米國株価指数データ (再掲)</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="決定木分析.html"><a href="決定木分析.html#分類木"><i class="fa fa-check"></i><b>8.3</b> 分類木</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="アンサンブル学習.html"><a href="アンサンブル学習.html"><i class="fa fa-check"></i><b>9</b> アンサンブル学習</a>
<ul>
<li class="chapter" data-level="9.1" data-path="アンサンブル学習.html"><a href="アンサンブル学習.html#決定木-分類木"><i class="fa fa-check"></i><b>9.1</b> 決定木 (分類木)</a>
<ul>
<li class="chapter" data-level="" data-path="アンサンブル学習.html"><a href="アンサンブル学習.html#データセット3-個人ローン信用データ-再掲"><i class="fa fa-check"></i>データセット3: 個人ローン信用データ (再掲)</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="アンサンブル学習.html"><a href="アンサンブル学習.html#ランダムフォレスト分類木"><i class="fa fa-check"></i><b>9.2</b> ランダムフォレスト分類木</a></li>
<li class="chapter" data-level="9.3" data-path="アンサンブル学習.html"><a href="アンサンブル学習.html#一般化ブースト回帰"><i class="fa fa-check"></i><b>9.3</b> 一般化ブースト回帰</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html"><i class="fa fa-check"></i><b>10</b> サポートベクターマシン (SVM)</a>
<ul>
<li class="chapter" data-level="10.1" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#svm-rbfカーネル-の動作の確認"><i class="fa fa-check"></i><b>10.1</b> SVM (RBFカーネル) の動作の確認</a>
<ul>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#データセット1-iris-あやめ-データ"><i class="fa fa-check"></i>データセット1: iris (あやめ) データ</a></li>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#svmの実行"><i class="fa fa-check"></i>SVMの実行</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#値分類"><i class="fa fa-check"></i><b>10.2</b> 2値分類</a>
<ul>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#データセット2-spamデータ"><i class="fa fa-check"></i>データセット2: spamデータ</a></li>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#svmの実行-1"><i class="fa fa-check"></i>SVMの実行</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#値分類-1"><i class="fa fa-check"></i><b>10.3</b> 3値分類</a>
<ul>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#svmの実行-2"><i class="fa fa-check"></i>SVMの実行</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#代替パッケージe1071の利用"><i class="fa fa-check"></i><b>10.4</b> 代替パッケージ<strong>e1071</strong>の利用</a>
<ul>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#svmの実行-3"><i class="fa fa-check"></i>SVMの実行</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#ハイパーパラメータのチューニング"><i class="fa fa-check"></i><b>10.5</b> ハイパーパラメータのチューニング</a>
<ul>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#線形カーネルの場合"><i class="fa fa-check"></i>線形カーネルの場合</a></li>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#rbfカーネルの場合"><i class="fa fa-check"></i>RBFカーネルの場合</a></li>
<li class="chapter" data-level="" data-path="サポートベクターマシン-svm.html"><a href="サポートベクターマシン-svm.html#e1071内にあるチューニング用の便利な関数群"><i class="fa fa-check"></i><strong>e1071</strong>内にあるチューニング用の便利な関数群</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html"><i class="fa fa-check"></i><b>11</b> 主成分分析 (PCA)</a>
<ul>
<li class="chapter" data-level="11.1" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#基本操作-1"><i class="fa fa-check"></i><b>11.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#データセット-従業員スキル評価データ仮想"><i class="fa fa-check"></i>データセット: 従業員スキル評価データ(仮想)</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#種類のpca-相関行列ベース-vs-分散共分散行列ベース"><i class="fa fa-check"></i><b>11.2</b> 2種類のPCA: 相関行列ベース vs 分散共分散行列ベース</a>
<ul>
<li class="chapter" data-level="" data-path="主成分分析-pca.html"><a href="主成分分析-pca.html#データセット3-usarrests-data"><i class="fa fa-check"></i>データセット3: USArrests data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="探索的因子分析.html"><a href="探索的因子分析.html"><i class="fa fa-check"></i><b>12</b> 探索的因子分析</a>
<ul>
<li class="chapter" data-level="12.1" data-path="探索的因子分析.html"><a href="探索的因子分析.html#基本操作-2"><i class="fa fa-check"></i><b>12.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="探索的因子分析.html"><a href="探索的因子分析.html#データセット1-従業員評価データ-仮想"><i class="fa fa-check"></i>データセット1: 従業員評価データ (仮想)</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="探索的因子分析.html"><a href="探索的因子分析.html#ライブラリpsychの利用"><i class="fa fa-check"></i><b>12.2</b> ライブラリ<strong>psych</strong>の利用</a></li>
<li class="chapter" data-level="12.3" data-path="探索的因子分析.html"><a href="探索的因子分析.html#因子分析に有用なツール"><i class="fa fa-check"></i><b>12.3</b> 因子分析に有用なツール</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="クラスター分析.html"><a href="クラスター分析.html"><i class="fa fa-check"></i><b>13</b> クラスター分析</a>
<ul>
<li class="chapter" data-level="13.1" data-path="クラスター分析.html"><a href="クラスター分析.html#基本操作-3"><i class="fa fa-check"></i><b>13.1</b> 基本操作</a>
<ul>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#階層型クラスタリング"><i class="fa fa-check"></i>階層型クラスタリング</a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#k-means法"><i class="fa fa-check"></i>k-means法</a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#変数に対するクラスタリング"><i class="fa fa-check"></i>変数に対するクラスタリング</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="クラスター分析.html"><a href="クラスター分析.html#データ分析例-1"><i class="fa fa-check"></i><b>13.2</b> データ分析例</a>
<ul>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#データセット-1-ワイン品質データ-再掲"><i class="fa fa-check"></i>データセット (1): ワイン品質データ (再掲)</a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#データセット-2-id無し-posデータ"><i class="fa fa-check"></i>データセット (2): (ID無し) POSデータ</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="クラスター分析.html"><a href="クラスター分析.html#発展的なクラスター分析"><i class="fa fa-check"></i><b>13.3</b> 発展的なクラスター分析</a>
<ul>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#関数agnes"><i class="fa fa-check"></i>関数<code>agnes</code></a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#関数pheatmap"><i class="fa fa-check"></i>関数<code>pheatmap</code></a></li>
<li class="chapter" data-level="" data-path="クラスター分析.html"><a href="クラスター分析.html#関数pam"><i class="fa fa-check"></i>関数<code>pam</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html"><i class="fa fa-check"></i><b>14</b> XAI (Explainable AI)</a>
<ul>
<li class="chapter" data-level="" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#回帰問題のケース"><i class="fa fa-check"></i>回帰問題のケース</a></li>
<li class="chapter" data-level="14.1" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#pfi"><i class="fa fa-check"></i><b>14.1</b> PFI</a></li>
<li class="chapter" data-level="14.2" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#pdp"><i class="fa fa-check"></i><b>14.2</b> PDP</a></li>
<li class="chapter" data-level="14.3" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#ice"><i class="fa fa-check"></i><b>14.3</b> ICE</a>
<ul>
<li class="chapter" data-level="" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#pdp-ice"><i class="fa fa-check"></i>PDP + ICE</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#lime"><i class="fa fa-check"></i><b>14.4</b> LIME</a></li>
<li class="chapter" data-level="14.5" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#shap"><i class="fa fa-check"></i><b>14.5</b> SHAP</a>
<ul>
<li class="chapter" data-level="" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#分類問題のケース"><i class="fa fa-check"></i>分類問題のケース</a></li>
<li class="chapter" data-level="" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#多値分類問題の例-iris"><i class="fa fa-check"></i>多値分類問題の例 (iris)</a></li>
<li class="chapter" data-level="" data-path="xai-explainable-ai.html"><a href="xai-explainable-ai.html#値分類問題"><i class="fa fa-check"></i>2値分類問題</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">金融データサイエンス</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r言語の基本" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> R言語の基本<a href="r言語の基本.html#r言語の基本" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="rの基本プログラミング" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Rの基本プログラミング<a href="r言語の基本.html#rの基本プログラミング" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>主な参考文献：
<ul>
<li>金 (2017),『Rによるデータサイエンス』, 森北出版.</li>
<li>山田他 (2008),『Rによるやさしい統計学』, オーム社.</li>
<li>Venables, Smith, and R Development Core Team (03), R入門.
<a href="http://minato.sip21c.org/swtips/R-jp-docs/R-intro-170.jp.pdf" class="uri">http://minato.sip21c.org/swtips/R-jp-docs/R-intro-170.jp.pdf</a></li>
<li>R Core Team (2024). R Language Definition, R Foundation for Statistical Computing.
<a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.pdf" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-lang.pdf</a></li>
</ul></li>
<li>本コースは, 基本的なRプログラミングにもっぱら限定
<ul>
<li>よりモダンなプログラミング (本コース終了後) → tidyverse</li>
<li>例. 松村他, 『RユーザーのためのRStudio[実践]入門]』, 技術評論社</li>
</ul></li>
<li>Rコーディングスタイルの例
<ul>
<li>Google, “Google’s R Style Guide”, <a href="https://google.github.io/styleguide/Rguide.html" class="uri">https://google.github.io/styleguide/Rguide.html</a></li>
<li>Hadley Wickham, “Tidyverse Style Guide”, <a href="https://style.tidyverse.org/" class="uri">https://style.tidyverse.org/</a></li>
</ul></li>
</ul>
<div id="基本操作" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> 基本操作<a href="r言語の基本.html#基本操作" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>数値 (ベクトル), 演算の直接評価</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="r言語の基本.html#cb2-1" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="r言語の基本.html#cb4-1" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="r言語の基本.html#cb6-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<ul>
<li>変数xに値を格納. 変数xに対する演算</li>
</ul>
<pre><code>- 基本形: 変数名 &lt;- 代入する値</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="r言語の基本.html#cb9-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb9-2"><a href="r言語の基本.html#cb9-2" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb9-3"><a href="r言語の基本.html#cb9-3" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="r言語の基本.html#cb11-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)) <span class="co"># 代入と表示を同時に実行</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="r言語の基本.html#cb13-1" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  1  4  9 16 25</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="r言語の基本.html#cb15-1" tabindex="-1"></a>x<span class="sc">**</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  1  4  9 16 25</code></pre>
<ul>
<li>xに関数を適用</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="r言語の基本.html#cb17-1" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="r言語の基本.html#cb19-1" tabindex="-1"></a><span class="fu">var</span>(x)</span></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="r言語の基本.html#cb21-1" tabindex="-1"></a><span class="fu">sd</span>(x)</span></code></pre></div>
<pre><code>## [1] 1.581139</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="r言語の基本.html#cb23-1" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##       1       2       3       3       4       5</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="r言語の基本.html#cb25-1" tabindex="-1"></a><span class="co"># sqrt, summary, ...</span></span></code></pre></div>
<ul>
<li>その他, R言語の基本</li>
</ul>
<pre><code>- 空白は無視される
- Pythonと異なり, インデントは意味を持たない
- 一行に二つのコマンドを入力する場合は, 間をセミコロン (;) で区切る
- 行頭がシャープ (#) で始まる行は丸々無視される (コメント行)
- 中括弧 {} は通常、コードのブロックを作成するために使用. 主に, 条件文、ループ、関数などのブロック構造を定義する際に使用.</code></pre>
<!---
```
- R言語における処理の対象は, オブジェクト (object) と呼ばれる
- オブジェクトには名前が与えられる
```
--->
<!--- 
#### 参考: R言語に関する補足

- R言語において最重要なデータタイプであるベクトルには, 原始的ベクトル(atomic vectors)とリストがある. 
  - 原始的ベクトル(atomic vectors): 同一のtypeから成る
  - リスト: 異なるtypeの要素から成る (recursive vectors)
- 原始的ベクトルを構成する要素のtypeの主要4種類:
  論理型 (logical), 倍精度型 (double), 整数型 (integer) (合わせて数値型 (numeric)), 文字列型 (character) 
- データフレーム (data.frame): リストの上に構築される表形式の構造
- 参考:[https://adv-r.hadley.nz](https://adv-r.hadley.nz)

[http://minato.sip21c.org/swtips/R-jp-docs/R-intro-170.jp.pdf](https://ultrabem-branch3.com/informatics/r/data_format#google_vignette)
- オブジェクト (object) : R言語における処理の対象
  - オブジェクトの基本的なデータ型: 
    論理型 (logical), 数値型 (numeric), 整数型 (integer), 文字列型 (character) 等
    (→ ベクトルを構成する要素の("原始的な")型)
  - オブジェクトのクラス属性 (class): 
    ベクトル(vector), 行列 (matrix), リスト (list),
    データフレーム (data.frame), 関数 (function) 等 (→ データ構造)

  - オブジェクトには, type、mode, class の 3 種類の型が存在
  - 型 (type): 数値型 (numeric), 文字型 (character), 論理型 (logical), 等
  - クラス (class): ベクトル (vector), 行列 (matrix), リスト (list), データフレーム (data.frame), 関数型 (function) など
    自分で新たなクラスを定義することも可能
- (要確認) Rプログラムの中で処理の対象となる最小単位をオブジェクト (object) と呼ぶ. オブジェクトには, ベクトル型, 行列型, リスト型, データフレーム型, 関数型などの様々なクラス (class) が存在する. 自分で新たなクラスを定義することもできる.--->
</div>
<div id="基本構文" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> 基本構文<a href="r言語の基本.html#基本構文" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Rでは, データの加工や分析を行う際などに,
分析者自らの手で処理の手順をプログラミングをすることができる.</p>
<div id="forループ" class="section level4 unnumbered hasAnchor">
<h4>forループ<a href="r言語の基本.html#forループ" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code># 繰り返し処理 (forループ)
for (変数名 in 変数のリスト){
    1回分の処理内容
}
```

#### if文 {-}
```
# 条件分岐 (if文)
# if (条件式) 処理1 else 処理2</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="r言語の基本.html#cb28-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb28-2"><a href="r言語の基本.html#cb28-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){x <span class="ot">&lt;-</span> x <span class="sc">+</span> i}</span>
<span id="cb28-3"><a href="r言語の基本.html#cb28-3" tabindex="-1"></a>x</span>
<span id="cb28-4"><a href="r言語の基本.html#cb28-4" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb28-5"><a href="r言語の基本.html#cb28-5" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb28-6"><a href="r言語の基本.html#cb28-6" tabindex="-1"></a><span class="cf">for</span> (a <span class="cf">in</span> aaa) <span class="fu">print</span> (a)</span></code></pre></div>
<pre><code>## [1] 55
## [1] 1
## [1] 3
## [1] 5</code></pre>
</div>
</div>
<div id="自作関数" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> 自作関数<a href="r言語の基本.html#自作関数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>同様な処理を”パラメータ”を変えながら何度も実行する場合は,
関数を作っておくと便利である.</p>
<p>※ 関数に付与する名前として, Rですでに使われている関数名や, Rで特別な意味を持つ値 (T, Fなど)は避けること</p>
<pre><code># 自作関数の作成
関数名 &lt;- function(引数1, 引数2, ...){
    処理内容
}</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="r言語の基本.html#cb31-1" tabindex="-1"></a>myfunc <span class="ot">&lt;-</span> <span class="cf">function</span>(y){</span>
<span id="cb31-2"><a href="r言語の基本.html#cb31-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb31-3"><a href="r言語の基本.html#cb31-3" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>y) x <span class="ot">&lt;-</span> x <span class="sc">+</span> i</span>
<span id="cb31-4"><a href="r言語の基本.html#cb31-4" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb31-5"><a href="r言語の基本.html#cb31-5" tabindex="-1"></a>}</span>
<span id="cb31-6"><a href="r言語の基本.html#cb31-6" tabindex="-1"></a><span class="co"># 実行例</span></span>
<span id="cb31-7"><a href="r言語の基本.html#cb31-7" tabindex="-1"></a><span class="fu">myfunc</span>(<span class="dv">10</span>)</span>
<span id="cb31-8"><a href="r言語の基本.html#cb31-8" tabindex="-1"></a></span>
<span id="cb31-9"><a href="r言語の基本.html#cb31-9" tabindex="-1"></a>myfunc2 <span class="ot">&lt;-</span> <span class="cf">function</span>(y){</span>
<span id="cb31-10"><a href="r言語の基本.html#cb31-10" tabindex="-1"></a>    <span class="cf">if</span>(y <span class="sc">&gt;</span> <span class="dv">10</span>) <span class="fu">print</span>(<span class="st">&quot;yes&quot;</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="st">&quot;no&quot;</span>)</span>
<span id="cb31-11"><a href="r言語の基本.html#cb31-11" tabindex="-1"></a>    }</span>
<span id="cb31-12"><a href="r言語の基本.html#cb31-12" tabindex="-1"></a><span class="co"># 実行例</span></span>
<span id="cb31-13"><a href="r言語の基本.html#cb31-13" tabindex="-1"></a><span class="fu">myfunc2</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 55
## [1] &quot;no&quot;</code></pre>
</div>
<div id="パッケージのインストール-読み込み" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> パッケージのインストール &amp; 読み込み<a href="r言語の基本.html#パッケージのインストール-読み込み" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="r言語の基本.html#cb33-1" tabindex="-1"></a><span class="co">#lda # lda関数 → このままだエラー発生</span></span>
<span id="cb33-2"><a href="r言語の基本.html#cb33-2" tabindex="-1"></a></span>
<span id="cb33-3"><a href="r言語の基本.html#cb33-3" tabindex="-1"></a><span class="fu">library</span>()       <span class="co"># インストール済パッケージ一覧</span></span>
<span id="cb33-4"><a href="r言語の基本.html#cb33-4" tabindex="-1"></a><span class="fu">search</span>()        <span class="co"># 読み込み済みパッケージ一覧</span></span>
<span id="cb33-5"><a href="r言語の基本.html#cb33-5" tabindex="-1"></a><span class="fu">library</span>(MASS) <span class="co"># MASSパッケージの読み込み(ロード)</span></span>
<span id="cb33-6"><a href="r言語の基本.html#cb33-6" tabindex="-1"></a><span class="fu">search</span>() <span class="co"># アタッチされたパッケージのリスト表示</span></span>
<span id="cb33-7"><a href="r言語の基本.html#cb33-7" tabindex="-1"></a>lda</span>
<span id="cb33-8"><a href="r言語の基本.html#cb33-8" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;DAAG&quot;</span>)</span>
<span id="cb33-9"><a href="r言語の基本.html#cb33-9" tabindex="-1"></a><span class="co"># http://cran.r-project.org</span></span>
<span id="cb33-10"><a href="r言語の基本.html#cb33-10" tabindex="-1"></a><span class="co"># http://cran.r-project.org/web/packages/googleVis/index.html</span></span>
<span id="cb33-11"><a href="r言語の基本.html#cb33-11" tabindex="-1"></a><span class="co"># パッケージインストローラー</span></span></code></pre></div>
</div>
<div id="ヘルプ" class="section level3 hasAnchor" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> ヘルプ<a href="r言語の基本.html#ヘルプ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>関数のヘルプ</li>
<li>R関数helpを使うか, RStudioのプルダウンメニューやHelpペインを使用</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="r言語の基本.html#cb34-1" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;fivenum&quot;</span>) <span class="co"># 関数fivenumのヘルプ</span></span>
<span id="cb34-2"><a href="r言語の基本.html#cb34-2" tabindex="-1"></a>?fivenum</span></code></pre></div>
</div>
</div>
<div id="データの型や構造" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> データの型や構造<a href="r言語の基本.html#データの型や構造" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>ここで, R言語の基礎を理解するのに重要な二つの概念について,
初心者を念頭に正確性を犠牲にしながら概要について述べる.
実際はここでの記載よりもはるかに複雑で,
技術的にも難易度が高い.
包括的かつ技術的に正確な内容については,
例えば, <a href="https://adv-r.hadley.nz">https://adv-r.hadley.nz</a> を参照されたい.</p>
<div id="データの値の種類-データ型" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> データの値の種類 (“データ型”)<a href="r言語の基本.html#データの値の種類-データ型" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Rでは, データの取る値の主要な種類 (type) として,
実数型 (double), 整数型 (integer), 文字列型 (character), 論理型 (logical) がある.
また, 実数型, 整数型はまとめて数値型 (numeric) とも呼ばれる.
初心者は, 実数型と整数型の違いは気にしなくても良い.</p>
<!-- これらは, R言語における最も重要なデータの型であるベクトル (vector) の一種,  原子型ベクトル (atomic vector) を構成する -->
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="r言語の基本.html#cb35-1" tabindex="-1"></a><span class="co"># 実数型</span></span>
<span id="cb35-2"><a href="r言語の基本.html#cb35-2" tabindex="-1"></a><span class="fl">3.14</span></span>
<span id="cb35-3"><a href="r言語の基本.html#cb35-3" tabindex="-1"></a><span class="fl">2.718</span></span>
<span id="cb35-4"><a href="r言語の基本.html#cb35-4" tabindex="-1"></a><span class="co"># 整数型</span></span>
<span id="cb35-5"><a href="r言語の基本.html#cb35-5" tabindex="-1"></a><span class="dv">1</span><span class="dt">L</span></span>
<span id="cb35-6"><a href="r言語の基本.html#cb35-6" tabindex="-1"></a><span class="dv">5</span><span class="dt">L</span></span>
<span id="cb35-7"><a href="r言語の基本.html#cb35-7" tabindex="-1"></a><span class="co"># 文字列型</span></span>
<span id="cb35-8"><a href="r言語の基本.html#cb35-8" tabindex="-1"></a><span class="st">&quot;KBS&quot;</span></span>
<span id="cb35-9"><a href="r言語の基本.html#cb35-9" tabindex="-1"></a><span class="st">&quot;日吉&quot;</span></span>
<span id="cb35-10"><a href="r言語の基本.html#cb35-10" tabindex="-1"></a><span class="co"># 論理型</span></span>
<span id="cb35-11"><a href="r言語の基本.html#cb35-11" tabindex="-1"></a><span class="cn">TRUE</span> <span class="co"># または, T</span></span>
<span id="cb35-12"><a href="r言語の基本.html#cb35-12" tabindex="-1"></a><span class="cn">FALSE</span> <span class="co"># または, F</span></span></code></pre></div>
<p>次に, データの値の種類として, 上記以外に応用上知っておきたいものとして, 因子型 (factor),日付型 (Date)がある. 因子型は, カテゴリーデータに対して, 日付型は日付や時刻を表すデータに対して使うことができる.
Rでは, カテゴリーデータ (ベクトル) を因子型としてオブジェクトに格納しておけば, その後の統計分析においてわざわざダミー変数を作る操作は (おおむね) 不要となる. また, 日付型として格納したデータは日付や時間に関する処理において効果を発揮する.
与えられたデータに対して, R組み込み関数である factor(), as.Date() を適用することでこれらの型に変換することができる.
少しだけ発展的な内容になるが,　因子型は整数型を値に持つベクトル, 日付型は実数型を値に持つベクトルとしてR内部で扱われる (ベクトルやオブジェクトについては次に述べる).</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="r言語の基本.html#cb36-1" tabindex="-1"></a><span class="co"># 因子型</span></span>
<span id="cb36-2"><a href="r言語の基本.html#cb36-2" tabindex="-1"></a><span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;L&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;L&quot;</span>, <span class="st">&quot;M&quot;</span>)) <span class="co"># L/M/Hの3水準の因子型ベクトル (長さ5)</span></span>
<span id="cb36-3"><a href="r言語の基本.html#cb36-3" tabindex="-1"></a><span class="co"># 日付型</span></span>
<span id="cb36-4"><a href="r言語の基本.html#cb36-4" tabindex="-1"></a><span class="fu">as.Date</span>(<span class="st">&quot;2023-10-02&quot;</span>)</span></code></pre></div>
</div>
<div id="データの配列の仕方-データ構造" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> データの配列の仕方 (“データ構造”)<a href="r言語の基本.html#データの配列の仕方-データ構造" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- Rでは, (複数の) データをまとめたベクトル (vector) と呼ばれる構造物が処理の基本的な対象となる.
※ ベクトル同じ種類の値を持つデータを1要素として一つにまとめたものを原子ベクトル(atomic vector), 異なる種類のデータを一つにまとめたものをリスト (list) と呼ぶ. -->
<p>Rでは, データの配置の仕方の種類の主要なものとして,
ベクトル (vector), リスト (list), 行列 (matrix), 配列(array), データフレーム (data frame) などがある.
分析に応じて, 適切なデータの構造にして処理を行う必要がある.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="r言語の基本.html#cb37-1" tabindex="-1"></a><span class="co"># ベクトル</span></span>
<span id="cb37-2"><a href="r言語の基本.html#cb37-2" tabindex="-1"></a><span class="fu">c</span>(<span class="fl">3.14</span>, <span class="fl">2.718</span>)</span>
<span id="cb37-3"><a href="r言語の基本.html#cb37-3" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;KBS&quot;</span>, <span class="st">&quot;日吉&quot;</span>)</span>
<span id="cb37-4"><a href="r言語の基本.html#cb37-4" tabindex="-1"></a><span class="co"># リスト</span></span>
<span id="cb37-5"><a href="r言語の基本.html#cb37-5" tabindex="-1"></a><span class="fu">list</span>(<span class="st">&quot;KBS&quot;</span>, <span class="dv">1962</span><span class="dt">L</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb37-6"><a href="r言語の基本.html#cb37-6" tabindex="-1"></a><span class="co"># 行列</span></span>
<span id="cb37-7"><a href="r言語の基本.html#cb37-7" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T)</span>
<span id="cb37-8"><a href="r言語の基本.html#cb37-8" tabindex="-1"></a><span class="co"># 配列</span></span>
<span id="cb37-9"><a href="r言語の基本.html#cb37-9" tabindex="-1"></a><span class="fu">arra</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>))</span>
<span id="cb37-10"><a href="r言語の基本.html#cb37-10" tabindex="-1"></a><span class="co"># データフレーム</span></span>
<span id="cb37-11"><a href="r言語の基本.html#cb37-11" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Steve&quot;</span>, <span class="st">&quot;Top&quot;</span>), <span class="at">income =</span> <span class="fu">c</span>(<span class="dv">40000</span>, <span class="dv">50000</span>))</span></code></pre></div>
<p>ちなみに, これらの”データ構造”には階層関係があり, 行列や配列はベクトルの特別な場合, リストはベクトルの特別な場合, データフレームはリストの特別な場合である.
データフレームは, リスト (異なる種類のデータを同時に要素として持つ) でありながら,
リストの各要素 (ベクトル) の長さが等しく, 2次元の行列の形式にデータが並べられたものである.
R言語では, ベクトルが最も基本的な”データ構造”である.
Rを用いた統計分析では, データフレームを用いるケースが非常に多いため,
データフレームを使えるようになることが必須である.</p>
<p>Rで分析を行う場合には, データや関数 (データ処理するための手続きを書いたコード) を<strong>オブジェクト (object)</strong> と呼ばれる”箱”に名前を付けて一旦格納し, その名前を呼び出す形で処理を実行するのが便利である.
量的変数や質的変数を同時に持つデータセットの分析には, データフレームが便利である.
オブジェクトにはクラス (class) というオブジェクトの持つデータ構造の種類の属性が付与される.</p>
<p>なお, Rには, type, class, modeの3つの”型”が存在し混乱しやすい. 初心者は違いを気にする必要はなく,
大雑把に, 上の”データ型”は関数 typeof(), “データ構造”は関数 class() により調べることができると知っていれば十分である. 興味のある読者は以下を参照:
<a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Attributes">https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Attributes</a></p>
<div id="特別な値" class="section level4 unnumbered hasAnchor">
<h4>特別な値<a href="r言語の基本.html#特別な値" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Rにおける分析において注意や対処が必要な, データの取り得る特別な値として,
- NA (欠損値)
- NULL (非存在)
- NaN (非数値)
- Inf (無限大)</p>
<p>これらの値をテストする関数が用意されている.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="r言語の基本.html#cb38-1" tabindex="-1"></a><span class="fu">is.na</span>()</span>
<span id="cb38-2"><a href="r言語の基本.html#cb38-2" tabindex="-1"></a><span class="fu">is.null</span>()</span>
<span id="cb38-3"><a href="r言語の基本.html#cb38-3" tabindex="-1"></a><span class="fu">is.nan</span>()</span>
<span id="cb38-4"><a href="r言語の基本.html#cb38-4" tabindex="-1"></a><span class="fu">is.infinite</span>()</span>
<span id="cb38-5"><a href="r言語の基本.html#cb38-5" tabindex="-1"></a><span class="fu">is.finite</span>()</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="r言語の基本.html#cb39-1" tabindex="-1"></a><span class="co"># NAの含まれている例</span></span>
<span id="cb39-2"><a href="r言語の基本.html#cb39-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb39-3"><a href="r言語の基本.html#cb39-3" tabindex="-1"></a>x <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA NA NA NA NA</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="r言語の基本.html#cb41-1" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="r言語の基本.html#cb43-1" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="r言語の基本.html#cb45-1" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 3.25</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="r言語の基本.html#cb47-1" tabindex="-1"></a><span class="co"># NULLの含まれている例</span></span>
<span id="cb47-2"><a href="r言語の基本.html#cb47-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb47-3"><a href="r言語の基本.html#cb47-3" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>)</span>
<span id="cb47-4"><a href="r言語の基本.html#cb47-4" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## a b c d e 
## 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="r言語の基本.html#cb49-1" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb49-2"><a href="r言語の基本.html#cb49-2" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="r言語の基本.html#cb51-1" tabindex="-1"></a><span class="co"># NaN, Infの発生例</span></span>
<span id="cb51-2"><a href="r言語の基本.html#cb51-2" tabindex="-1"></a><span class="dv">0</span> <span class="sc">/</span> <span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="r言語の基本.html#cb53-1" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> <span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<p>上の”データ型”や”データ構造”を調べる関数も用意されている.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="r言語の基本.html#cb55-1" tabindex="-1"></a><span class="co"># 整数値を持つ行列の例</span></span>
<span id="cb55-2"><a href="r言語の基本.html#cb55-2" tabindex="-1"></a>abc <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T)</span>
<span id="cb55-3"><a href="r言語の基本.html#cb55-3" tabindex="-1"></a><span class="fu">is.numeric</span>(abc)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="r言語の基本.html#cb57-1" tabindex="-1"></a><span class="fu">is.integer</span>(abc)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="r言語の基本.html#cb59-1" tabindex="-1"></a><span class="fu">is.matrix</span>(abc)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="r言語の基本.html#cb61-1" tabindex="-1"></a><span class="fu">typeof</span>(abc)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="r言語の基本.html#cb63-1" tabindex="-1"></a><span class="fu">class</span>(abc)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="r言語の基本.html#cb65-1" tabindex="-1"></a><span class="fu">mode</span>(abc)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="r言語の基本.html#cb67-1" tabindex="-1"></a><span class="fu">str</span>(abc)</span></code></pre></div>
<pre><code>##  int [1:2, 1:4] 1 5 2 6 3 7 4 8</code></pre>
</div>
</div>
<div id="ベクトル" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> ベクトル<a href="r言語の基本.html#ベクトル" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="r言語の基本.html#cb69-1" tabindex="-1"></a><span class="co"># 以下は, 互いに等価</span></span>
<span id="cb69-2"><a href="r言語の基本.html#cb69-2" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>)　<span class="co"># 変数aaaに数値ベクトル(2,4,6,8)を割り当てる</span></span>
<span id="cb69-3"><a href="r言語の基本.html#cb69-3" tabindex="-1"></a>aaa <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>)</span>
<span id="cb69-4"><a href="r言語の基本.html#cb69-4" tabindex="-1"></a>aaa <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">8</span>, <span class="dv">2</span>)</span>
<span id="cb69-5"><a href="r言語の基本.html#cb69-5" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>) <span class="ot">-&gt;</span> aaa</span>
<span id="cb69-6"><a href="r言語の基本.html#cb69-6" tabindex="-1"></a>aaa <span class="ot">&lt;-</span>  <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span> <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb69-7"><a href="r言語の基本.html#cb69-7" tabindex="-1"></a><span class="co"># assign(&quot;aaa&quot;, c(2, 4, 6, 8)) # 値を割り当てる際に, &quot;環境&quot;を指定することができる</span></span>
<span id="cb69-8"><a href="r言語の基本.html#cb69-8" tabindex="-1"></a></span>
<span id="cb69-9"><a href="r言語の基本.html#cb69-9" tabindex="-1"></a><span class="co"># ベクトルの長さ</span></span>
<span id="cb69-10"><a href="r言語の基本.html#cb69-10" tabindex="-1"></a><span class="fu">length</span>(aaa)</span>
<span id="cb69-11"><a href="r言語の基本.html#cb69-11" tabindex="-1"></a></span>
<span id="cb69-12"><a href="r言語の基本.html#cb69-12" tabindex="-1"></a><span class="co"># 文字列ベクトル</span></span>
<span id="cb69-13"><a href="r言語の基本.html#cb69-13" tabindex="-1"></a>bbb <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;東京&quot;</span>, <span class="st">&quot;埼玉&quot;</span>, <span class="st">&quot;千葉&quot;</span>, <span class="st">&quot;神奈川&quot;</span>)</span>
<span id="cb69-14"><a href="r言語の基本.html#cb69-14" tabindex="-1"></a></span>
<span id="cb69-15"><a href="r言語の基本.html#cb69-15" tabindex="-1"></a><span class="co"># ベクトルの各要素に名前 (ラベル) を付与</span></span>
<span id="cb69-16"><a href="r言語の基本.html#cb69-16" tabindex="-1"></a><span class="fu">names</span>(aaa) <span class="ot">&lt;-</span> bbb</span>
<span id="cb69-17"><a href="r言語の基本.html#cb69-17" tabindex="-1"></a></span>
<span id="cb69-18"><a href="r言語の基本.html#cb69-18" tabindex="-1"></a><span class="co"># ベクトル要素の取り出し</span></span>
<span id="cb69-19"><a href="r言語の基本.html#cb69-19" tabindex="-1"></a>bbb[<span class="dv">1</span>]</span>
<span id="cb69-20"><a href="r言語の基本.html#cb69-20" tabindex="-1"></a>bbb[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span>
<span id="cb69-21"><a href="r言語の基本.html#cb69-21" tabindex="-1"></a>bbb[<span class="fu">c</span>(T, F, T, F)] <span class="co"># インデックスの値がT (TRUE) の要素の取り出し</span></span>
<span id="cb69-22"><a href="r言語の基本.html#cb69-22" tabindex="-1"></a>bbb[<span class="fu">c</span>(T, F, F)] <span class="co"># 注意</span></span></code></pre></div>
<pre><code>## [1] 4
## [1] &quot;東京&quot;
## [1] &quot;埼玉&quot;   &quot;神奈川&quot;
## [1] &quot;東京&quot; &quot;千葉&quot;
## [1] &quot;東京&quot;   &quot;神奈川&quot;</code></pre>
</div>
<div id="行列" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> 行列<a href="r言語の基本.html#行列" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="r言語の基本.html#cb71-1" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>) <span class="co"># 全要素0の3x4-行列</span></span>
<span id="cb71-2"><a href="r言語の基本.html#cb71-2" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">4</span>) <span class="co"># 行列の値に使うベクトル (0:4) の長さと 行数 (3)・列数 (4) が不一致</span></span></code></pre></div>
<pre><code>## Warning in matrix(0:4, 3, 4): data length [5] is not a sub-multiple or multiple
## of the number of rows [3]</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    0    0    0    0
## [2,]    0    0    0    0
## [3,]    0    0    0    0
##      [,1] [,2] [,3] [,4]
## [1,]    0    3    1    4
## [2,]    1    4    2    0
## [3,]    2    0    3    1</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="r言語の基本.html#cb74-1" tabindex="-1"></a>ccc <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>), <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># 2x3-行列</span></span>
<span id="cb74-2"><a href="r言語の基本.html#cb74-2" tabindex="-1"></a>ccc[<span class="dv">1</span>, <span class="dv">1</span>] <span class="co"># (1, 1)成分</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="r言語の基本.html#cb76-1" tabindex="-1"></a>ccc[<span class="dv">1</span>, ] <span class="co"># 第1行(行ベクトル)</span></span></code></pre></div>
<pre><code>## [1] 3 1 5</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="r言語の基本.html#cb78-1" tabindex="-1"></a>ccc[, <span class="dv">1</span>] <span class="co"># 第1列(列ベクトル)</span></span></code></pre></div>
<pre><code>## [1] 3 2</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="r言語の基本.html#cb80-1" tabindex="-1"></a>ccc[<span class="sc">-</span><span class="dv">2</span>, ] <span class="co"># 2行目を除く → 2x4-行列</span></span></code></pre></div>
<pre><code>## [1] 3 1 5</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="r言語の基本.html#cb82-1" tabindex="-1"></a>ccc[, <span class="sc">-</span><span class="dv">2</span>] <span class="co"># 2列目を除く → 3x3-行列</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    3    5
## [2,]    2    4</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="r言語の基本.html#cb84-1" tabindex="-1"></a><span class="fu">dim</span>(ccc); <span class="fu">nrow</span>(ccc); <span class="fu">ncol</span>(ccc)  <span class="co"># セミコロン(;)により, 複数のコマンドを1行に収め, 順次実行</span></span></code></pre></div>
<pre><code>## [1] 2 3</code></pre>
<pre><code>## [1] 2</code></pre>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="r言語の基本.html#cb88-1" tabindex="-1"></a>ccc[<span class="dv">2</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="co"># (2, 3)成分に値10を代入</span></span>
<span id="cb88-2"><a href="r言語の基本.html#cb88-2" tabindex="-1"></a><span class="co"># 行列にラベルを付与</span></span>
<span id="cb88-3"><a href="r言語の基本.html#cb88-3" tabindex="-1"></a><span class="fu">colnames</span>(ccc) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;大阪&quot;</span>, <span class="st">&quot;京都&quot;</span>, <span class="st">&quot;名古屋&quot;</span>) <span class="co"># 列ラベル</span></span>
<span id="cb88-4"><a href="r言語の基本.html#cb88-4" tabindex="-1"></a><span class="fu">rownames</span>(ccc) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>) <span class="co"># 行ラベル</span></span>
<span id="cb88-5"><a href="r言語の基本.html#cb88-5" tabindex="-1"></a>ccc</span></code></pre></div>
<pre><code>##      大阪 京都 名古屋
## 2012    3    1      5
## 2013    2    6     10</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="r言語の基本.html#cb90-1" tabindex="-1"></a><span class="fu">t</span>(ccc)  <span class="co"># 転置</span></span></code></pre></div>
<pre><code>##        2012 2013
## 大阪      3    2
## 京都      1    6
## 名古屋    5   10</code></pre>
</div>
<div id="リスト" class="section level3 hasAnchor" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> リスト<a href="r言語の基本.html#リスト" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>ベクトル, 行列, 配列, リスト等の異なる型(&amp;異なる長さ)のオブジェクトを一つにまとめたオブジェクト</li>
</ul>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="r言語の基本.html#cb92-1" tabindex="-1"></a>L1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">rep</span>(<span class="st">&quot;A&quot;</span>, <span class="dv">3</span>), <span class="dv">1</span><span class="sc">:</span><span class="dv">0</span>, <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">4</span>))</span>
<span id="cb92-2"><a href="r言語の基本.html#cb92-2" tabindex="-1"></a>L1[[<span class="dv">1</span>]] <span class="co"># 1番目の要素(変数)の取り出し</span></span>
<span id="cb92-3"><a href="r言語の基本.html#cb92-3" tabindex="-1"></a></span>
<span id="cb92-4"><a href="r言語の基本.html#cb92-4" tabindex="-1"></a>k <span class="ot">&lt;-</span> <span class="fu">list</span> (<span class="at">name =</span> <span class="st">&quot;Taro&quot;</span>, <span class="at">salary =</span> <span class="dv">50000</span>, <span class="at">male =</span> T)</span>
<span id="cb92-5"><a href="r言語の基本.html#cb92-5" tabindex="-1"></a>k2 <span class="ot">&lt;-</span> <span class="fu">list</span> (<span class="st">&quot;Taro&quot;</span>, <span class="dv">50000</span>, T)       <span class="co"># 要素名 (タグ)なしの場合</span></span>
<span id="cb92-6"><a href="r言語の基本.html#cb92-6" tabindex="-1"></a></span>
<span id="cb92-7"><a href="r言語の基本.html#cb92-7" tabindex="-1"></a>k<span class="sc">$</span>sal       <span class="co"># 要素名は省略形可</span></span>
<span id="cb92-8"><a href="r言語の基本.html#cb92-8" tabindex="-1"></a></span>
<span id="cb92-9"><a href="r言語の基本.html#cb92-9" tabindex="-1"></a><span class="co"># リストはベクトルの一種 (recursive vector)</span></span>
<span id="cb92-10"><a href="r言語の基本.html#cb92-10" tabindex="-1"></a><span class="co"># 一方, 通常のベクトルはatomic vector (それ以上分解できない)</span></span>
<span id="cb92-11"><a href="r言語の基本.html#cb92-11" tabindex="-1"></a><span class="co"># vector()からリスト生成する場合</span></span>
<span id="cb92-12"><a href="r言語の基本.html#cb92-12" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">vector</span> (<span class="at">mode =</span> <span class="st">&quot;list&quot;</span>) </span>
<span id="cb92-13"><a href="r言語の基本.html#cb92-13" tabindex="-1"></a>z[[<span class="st">&quot;abd&quot;</span>]] <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb92-14"><a href="r言語の基本.html#cb92-14" tabindex="-1"></a></span>
<span id="cb92-15"><a href="r言語の基本.html#cb92-15" tabindex="-1"></a>k[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]      <span class="co"># 元のリストの部分リスト</span></span>
<span id="cb92-16"><a href="r言語の基本.html#cb92-16" tabindex="-1"></a>k2 <span class="ot">&lt;-</span> k[<span class="dv">2</span>]</span>
<span id="cb92-17"><a href="r言語の基本.html#cb92-17" tabindex="-1"></a><span class="fu">class</span>(k2); <span class="fu">str</span>(k2)</span>
<span id="cb92-18"><a href="r言語の基本.html#cb92-18" tabindex="-1"></a></span>
<span id="cb92-19"><a href="r言語の基本.html#cb92-19" tabindex="-1"></a>k2a <span class="ot">&lt;-</span> k[[<span class="dv">2</span>]]   <span class="co"># 2番目の要素(変数)の取り出し (要素の型を持つ結果を返す)</span></span>
<span id="cb92-20"><a href="r言語の基本.html#cb92-20" tabindex="-1"></a><span class="co"># k[[1:2]]      # --&gt; エラー</span></span>
<span id="cb92-21"><a href="r言語の基本.html#cb92-21" tabindex="-1"></a><span class="fu">class</span>(k2a); <span class="fu">str</span>(k2a)</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;A&quot; &quot;A&quot;
## [1] 50000
## $name
## [1] &quot;Taro&quot;
## 
## $salary
## [1] 50000
## 
## [1] &quot;list&quot;
## List of 1
##  $ salary: num 50000
## [1] &quot;numeric&quot;
##  num 50000</code></pre>
<ul>
<li>リストの要素追加・削除</li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="r言語の基本.html#cb94-1" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="st">&quot;abcd&quot;</span>, <span class="at">b =</span> <span class="dv">10</span>)</span>
<span id="cb94-2"><a href="r言語の基本.html#cb94-2" tabindex="-1"></a>z<span class="sc">$</span>c <span class="ot">&lt;-</span> <span class="st">&quot;piano&quot;</span></span>
<span id="cb94-3"><a href="r言語の基本.html#cb94-3" tabindex="-1"></a>z[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb94-4"><a href="r言語の基本.html#cb94-4" tabindex="-1"></a>z[<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)    </span>
<span id="cb94-5"><a href="r言語の基本.html#cb94-5" tabindex="-1"></a>z<span class="sc">$</span>b <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb94-6"><a href="r言語の基本.html#cb94-6" tabindex="-1"></a></span>
<span id="cb94-7"><a href="r言語の基本.html#cb94-7" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb94-8"><a href="r言語の基本.html#cb94-8" tabindex="-1"></a>xxx <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb94-9"><a href="r言語の基本.html#cb94-9" tabindex="-1"></a>yyy <span class="ot">&lt;-</span> <span class="fl">0.5</span> <span class="sc">*</span> xxx <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb94-10"><a href="r言語の基本.html#cb94-10" tabindex="-1"></a>lm_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(yyy <span class="sc">~</span> xxx)</span>
<span id="cb94-11"><a href="r言語の基本.html#cb94-11" tabindex="-1"></a><span class="fu">is.list</span>(lm_res)</span>
<span id="cb94-12"><a href="r言語の基本.html#cb94-12" tabindex="-1"></a>lm_res[[<span class="dv">1</span>]]</span>
<span id="cb94-13"><a href="r言語の基本.html#cb94-13" tabindex="-1"></a>lm_res<span class="sc">$</span>coef</span>
<span id="cb94-14"><a href="r言語の基本.html#cb94-14" tabindex="-1"></a>lm_res[<span class="st">&quot;coefficients&quot;</span>]</span></code></pre></div>
<pre><code>## [1] TRUE
## (Intercept)         xxx 
##  0.07544151  0.45963969 
## (Intercept)         xxx 
##  0.07544151  0.45963969 
## $coefficients
## (Intercept)         xxx 
##  0.07544151  0.45963969</code></pre>
</div>
<div id="データフレーム" class="section level3 hasAnchor" number="2.2.6">
<h3><span class="header-section-number">2.2.6</span> データフレーム<a href="r言語の基本.html#データフレーム" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>リストの特別な場合</li>
<li>長さが等しい複数のベクトルを要素に持つリスト</li>
<li>数値と文字列などの異なるデータが混在するデータを行列のように扱える</li>
<li>Rにおける様々な統計分析において多用される</li>
</ul>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="r言語の基本.html#cb96-1" tabindex="-1"></a>kids <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;taro&quot;</span>, <span class="st">&quot;hanako&quot;</span>)</span>
<span id="cb96-2"><a href="r言語の基本.html#cb96-2" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">8</span>)</span>
<span id="cb96-3"><a href="r言語の基本.html#cb96-3" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(kids, ages, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)   </span>
<span id="cb96-4"><a href="r言語の基本.html#cb96-4" tabindex="-1"></a><span class="co"># 注: stringsAsFactors = T: 文字ベクトルをfactorとして扱う</span></span>
<span id="cb96-5"><a href="r言語の基本.html#cb96-5" tabindex="-1"></a>d</span>
<span id="cb96-6"><a href="r言語の基本.html#cb96-6" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb96-7"><a href="r言語の基本.html#cb96-7" tabindex="-1"></a></span>
<span id="cb96-8"><a href="r言語の基本.html#cb96-8" tabindex="-1"></a><span class="co"># 以下の3つは等価な操作</span></span>
<span id="cb96-9"><a href="r言語の基本.html#cb96-9" tabindex="-1"></a>d[[<span class="dv">1</span>]]  <span class="co"># データフレームの第1列 (リストの一番目の要素) を取り出す(→ 文字列ベクトル)</span></span>
<span id="cb96-10"><a href="r言語の基本.html#cb96-10" tabindex="-1"></a>d<span class="sc">$</span>kids　<span class="co"># 変数(kids)のように取り出す</span></span>
<span id="cb96-11"><a href="r言語の基本.html#cb96-11" tabindex="-1"></a>d[, <span class="dv">1</span>]  <span class="co"># 行列のように操作 (--&gt; 便利)</span></span>
<span id="cb96-12"><a href="r言語の基本.html#cb96-12" tabindex="-1"></a><span class="co"># ただし,</span></span>
<span id="cb96-13"><a href="r言語の基本.html#cb96-13" tabindex="-1"></a>d[<span class="dv">1</span>]    <span class="co"># 第1列をデータフレーム (リスト) として取り出す</span></span>
<span id="cb96-14"><a href="r言語の基本.html#cb96-14" tabindex="-1"></a></span>
<span id="cb96-15"><a href="r言語の基本.html#cb96-15" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb96-16"><a href="r言語の基本.html#cb96-16" tabindex="-1"></a><span class="fu">rownames</span>(df1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;大阪&quot;</span>, <span class="st">&quot;京都&quot;</span>, <span class="st">&quot;名古屋&quot;</span>)</span>
<span id="cb96-17"><a href="r言語の基本.html#cb96-17" tabindex="-1"></a><span class="fu">colnames</span>(df1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;方言種類&quot;</span>, <span class="st">&quot;順位&quot;</span>)</span>
<span id="cb96-18"><a href="r言語の基本.html#cb96-18" tabindex="-1"></a></span>
<span id="cb96-19"><a href="r言語の基本.html#cb96-19" tabindex="-1"></a><span class="fu">class</span>(df1)</span>
<span id="cb96-20"><a href="r言語の基本.html#cb96-20" tabindex="-1"></a><span class="fu">is.vector</span>(df1)</span></code></pre></div>
<pre><code>##     kids ages
## 1   taro   10
## 2 hanako    8
## &#39;data.frame&#39;:    2 obs. of  2 variables:
##  $ kids: chr  &quot;taro&quot; &quot;hanako&quot;
##  $ ages: num  10 8
## [1] &quot;taro&quot;   &quot;hanako&quot;
## [1] &quot;taro&quot;   &quot;hanako&quot;
## [1] &quot;taro&quot;   &quot;hanako&quot;
##     kids
## 1   taro
## 2 hanako
## [1] &quot;data.frame&quot;
## [1] FALSE</code></pre>
</div>
</div>
<div id="データの操作演算" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> データの操作・演算<a href="r言語の基本.html#データの操作演算" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="ベクトルの結合-ソート" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> ベクトルの結合, ソート<a href="r言語の基本.html#ベクトルの結合-ソート" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="r言語の基本.html#cb98-1" tabindex="-1"></a>vec1 <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb98-2"><a href="r言語の基本.html#cb98-2" tabindex="-1"></a>vec2 <span class="ot">=</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb98-3"><a href="r言語の基本.html#cb98-3" tabindex="-1"></a><span class="fu">rbind</span>(vec1, vec2) <span class="co"># ベクトルの行方向への結合</span></span>
<span id="cb98-4"><a href="r言語の基本.html#cb98-4" tabindex="-1"></a><span class="fu">cbind</span>(vec1, vec2) <span class="co"># べクトルの列方向への結合</span></span>
<span id="cb98-5"><a href="r言語の基本.html#cb98-5" tabindex="-1"></a></span>
<span id="cb98-6"><a href="r言語の基本.html#cb98-6" tabindex="-1"></a>vec3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb98-7"><a href="r言語の基本.html#cb98-7" tabindex="-1"></a><span class="fu">sort</span>(vec3)  <span class="co"># 昇順</span></span>
<span id="cb98-8"><a href="r言語の基本.html#cb98-8" tabindex="-1"></a><span class="fu">rev</span>(vec3)       <span class="co"># 順番を逆転させる</span></span>
<span id="cb98-9"><a href="r言語の基本.html#cb98-9" tabindex="-1"></a></span>
<span id="cb98-10"><a href="r言語の基本.html#cb98-10" tabindex="-1"></a>ccc[, <span class="fu">order</span>(ccc[<span class="st">&quot;2012&quot;</span>, ])]</span>
<span id="cb98-11"><a href="r言語の基本.html#cb98-11" tabindex="-1"></a>ccc[, <span class="fu">sort.list</span>(ccc[<span class="st">&quot;2012&quot;</span>, ])]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## vec1    1    2    3    4
## vec2    2    3    4    5
##      vec1 vec2
## [1,]    1    2
## [2,]    2    3
## [3,]    3    4
## [4,]    4    5
## [1] 1 2 3 5
## [1] 3 1 5 2
##      京都 大阪 名古屋
## 2012    1    3      5
## 2013    6    2     10
##      京都 大阪 名古屋
## 2012    1    3      5
## 2013    6    2     10</code></pre>
</div>
<div id="二項演算" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> 二項演算<a href="r言語の基本.html#二項演算" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="r言語の基本.html#cb100-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>); y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb100-2"><a href="r言語の基本.html#cb100-2" tabindex="-1"></a>x <span class="sc">+</span> y</span>
<span id="cb100-3"><a href="r言語の基本.html#cb100-3" tabindex="-1"></a>x <span class="sc">*</span> y</span>
<span id="cb100-4"><a href="r言語の基本.html#cb100-4" tabindex="-1"></a>x <span class="sc">/</span> y</span>
<span id="cb100-5"><a href="r言語の基本.html#cb100-5" tabindex="-1"></a>x <span class="sc">^</span> <span class="dv">2</span></span>
<span id="cb100-6"><a href="r言語の基本.html#cb100-6" tabindex="-1"></a>x <span class="sc">&lt;</span> y</span></code></pre></div>
<pre><code>## [1] -2  4  4  0
## [1] -3  3 -5 -4
## [1] -0.3333333  3.0000000 -5.0000000 -1.0000000
## [1]  1  9 25  4
## [1] FALSE FALSE FALSE FALSE</code></pre>
</div>
<div id="論理演算" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> 論理演算<a href="r言語の基本.html#論理演算" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="r言語の基本.html#cb102-1" tabindex="-1"></a>lx <span class="ot">&lt;-</span> <span class="fu">c</span>(T, T, F);   ly <span class="ot">&lt;-</span> <span class="fu">c</span>(F, F, F)</span>
<span id="cb102-2"><a href="r言語の基本.html#cb102-2" tabindex="-1"></a>lx <span class="sc">&amp;</span> ly</span>
<span id="cb102-3"><a href="r言語の基本.html#cb102-3" tabindex="-1"></a>lx <span class="sc">&amp;&amp;</span> ly    <span class="co"># 最初の要素間の論理演算が成り立つと, 以降の演算は行わない</span></span>
<span id="cb102-4"><a href="r言語の基本.html#cb102-4" tabindex="-1"></a>lx <span class="sc">|</span> ly</span>
<span id="cb102-5"><a href="r言語の基本.html#cb102-5" tabindex="-1"></a>lx <span class="sc">||</span> ly    <span class="co"># 最初の要素間の論理演算が成り立つと, 以降の演算は行わない</span></span></code></pre></div>
</div>
<div id="条件式" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> 条件式<a href="r言語の基本.html#条件式" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="r言語の基本.html#cb103-1" tabindex="-1"></a><span class="co"># ==, &gt;, &lt;, &gt;=, &lt;= </span></span>
<span id="cb103-2"><a href="r言語の基本.html#cb103-2" tabindex="-1"></a><span class="co"># &amp;&amp;, ||</span></span></code></pre></div>
</div>
<div id="行列演算" class="section level3 hasAnchor" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> 行列演算<a href="r言語の基本.html#行列演算" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="r言語の基本.html#cb104-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb104-2"><a href="r言語の基本.html#cb104-2" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb104-3"><a href="r言語の基本.html#cb104-3" tabindex="-1"></a>A <span class="sc">%*%</span> B <span class="co"># 行列の積</span></span>
<span id="cb104-4"><a href="r言語の基本.html#cb104-4" tabindex="-1"></a><span class="co"># diag  # 対角行列</span></span>
<span id="cb104-5"><a href="r言語の基本.html#cb104-5" tabindex="-1"></a><span class="co"># solve # 逆行列</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    6   -9
## [2,]    9  -12
## [3,]   12  -15</code></pre>
</div>
</div>
<div id="r関数" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> R関数<a href="r言語の基本.html#r関数" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="数学基本関数" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> 数学基本関数<a href="r言語の基本.html#数学基本関数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code># sum; sqrt; abs
# exp; log; log10; log2; sin; cos
# round; ceiling; floor</code></pre>
</div>
<div id="基本統計量の計算" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> 基本統計量の計算<a href="r言語の基本.html#基本統計量の計算" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code># mean, max; min; range; median; quantile
# var; sd
# summary
# table
# cov; cor</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="r言語の基本.html#cb108-1" tabindex="-1"></a>統計 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;好き&quot;</span>, <span class="dv">8</span>), <span class="fu">rep</span>(<span class="st">&quot;嫌い&quot;</span>, <span class="dv">7</span>))</span>
<span id="cb108-2"><a href="r言語の基本.html#cb108-2" tabindex="-1"></a>数学 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;好き&quot;</span>, <span class="dv">6</span>), <span class="fu">rep</span>(<span class="st">&quot;嫌い&quot;</span>, <span class="dv">9</span>))</span>
<span id="cb108-3"><a href="r言語の基本.html#cb108-3" tabindex="-1"></a><span class="fu">table</span>(統計, 数学)       <span class="co"># クロス集計表, ベクトルは同一長</span></span></code></pre></div>
<pre><code>##       数学
## 統計 好き 嫌い
##   好き    6    2
##   嫌い    0    7</code></pre>
</div>
<div id="確率分布" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> 確率分布<a href="r言語の基本.html#確率分布" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code># dxxx(q)       # 確率密度, q:確率点
# pxxx(q)       # 累積確率, q:確率点
# qxxx(p)       # 確率点, p:確率
# rxxx(n)       # 乱数, n:個数
# ------------------------------------------------------------------
# xxx部分:
# unif(x, min, max)     # 一様分布
# norm(x, mean, sd) # 正規分布
# exp(x, rate)          # 指数分布
# binom(x, size, prob)      # ２項分布
# pois(x, lambda)       # ポアソン分布
# t(x, df)          # t分布
# chisq(x, df)          # カイ2乗分布
# f(x, df1, df2)        # F分布</code></pre>
<pre><code>curve(xを含んだ式, from = xの左端点, to = xの右端点)
# 関数のグラフ描画</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="r言語の基本.html#cb112-1" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">dnorm</span>(x, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), <span class="at">from =</span> <span class="sc">-</span><span class="dv">4</span>, <span class="at">to =</span> <span class="dv">4</span>)</span>
<span id="cb112-2"><a href="r言語の基本.html#cb112-2" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">dnorm</span>(x, <span class="at">mean =</span> <span class="dv">1</span>, <span class="at">sd =</span> <span class="dv">2</span>), <span class="at">from =</span> <span class="sc">-</span><span class="dv">4</span>, <span class="at">to =</span> <span class="dv">4</span>, <span class="at">add =</span> T)</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/prob_dist-1.png" width="672" /></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="r言語の基本.html#cb113-1" tabindex="-1"></a><span class="co"># 問：t分布(自由度4)の形状は?</span></span></code></pre></div>
</div>
<div id="その他便利な関数" class="section level3 hasAnchor" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> その他便利な関数<a href="r言語の基本.html#その他便利な関数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="r言語の基本.html#cb114-1" tabindex="-1"></a><span class="co"># sweep</span></span>
<span id="cb114-2"><a href="r言語の基本.html#cb114-2" tabindex="-1"></a><span class="co"># scale</span></span>
<span id="cb114-3"><a href="r言語の基本.html#cb114-3" tabindex="-1"></a><span class="co"># ifelse</span></span>
<span id="cb114-4"><a href="r言語の基本.html#cb114-4" tabindex="-1"></a><span class="fu">ifelse</span>(統計 <span class="sc">==</span> <span class="st">&quot;好き&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb114-5"><a href="r言語の基本.html#cb114-5" tabindex="-1"></a></span>
<span id="cb114-6"><a href="r言語の基本.html#cb114-6" tabindex="-1"></a><span class="co"># apply (X, MARGIN, FUN, ...)</span></span>
<span id="cb114-7"><a href="r言語の基本.html#cb114-7" tabindex="-1"></a><span class="fu">apply</span>(ccc, <span class="dv">1</span>, sum)</span>
<span id="cb114-8"><a href="r言語の基本.html#cb114-8" tabindex="-1"></a><span class="fu">apply</span>(ccc, <span class="dv">2</span>, sum)</span>
<span id="cb114-9"><a href="r言語の基本.html#cb114-9" tabindex="-1"></a><span class="fu">colMeans</span>(ccc)</span>
<span id="cb114-10"><a href="r言語の基本.html#cb114-10" tabindex="-1"></a><span class="fu">rowMeans</span>(ccc)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0
## 2012 2013 
##    9   18 
##   大阪   京都 名古屋 
##      5      7     15 
##   大阪   京都 名古屋 
##    2.5    3.5    7.5 
## 2012 2013 
##    3    6</code></pre>
</div>
</div>
<div id="データの可視化" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> データの可視化<a href="r言語の基本.html#データの可視化" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="r言語の基本.html#cb116-1" tabindex="-1"></a><span class="co"># 棒グラフ</span></span>
<span id="cb116-2"><a href="r言語の基本.html#cb116-2" tabindex="-1"></a><span class="fu">barplot</span>(ccc)</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/plot-1.png" width="672" /></p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="r言語の基本.html#cb117-1" tabindex="-1"></a><span class="fu">barplot</span>(ccc, <span class="at">beside =</span> T)</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/plot-2.png" width="672" /></p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="r言語の基本.html#cb118-1" tabindex="-1"></a><span class="fu">barplot</span>(ccc, <span class="at">beside =</span> T, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;lavender&quot;</span>), <span class="at">main =</span> <span class="st">&quot;test&quot;</span>)</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/plot-3.png" width="672" /></p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="r言語の基本.html#cb119-1" tabindex="-1"></a><span class="co"># apply(ccc, 1, pie)</span></span>
<span id="cb119-2"><a href="r言語の基本.html#cb119-2" tabindex="-1"></a><span class="co"># pie</span></span>
<span id="cb119-3"><a href="r言語の基本.html#cb119-3" tabindex="-1"></a><span class="co"># hist</span></span>
<span id="cb119-4"><a href="r言語の基本.html#cb119-4" tabindex="-1"></a><span class="co"># 折れ線グラフ (行列の各列(変数)の同時プロット)</span></span>
<span id="cb119-5"><a href="r言語の基本.html#cb119-5" tabindex="-1"></a><span class="fu">matplot</span>(ccc, <span class="at">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/plot-4.png" width="672" /></p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="r言語の基本.html#cb120-1" tabindex="-1"></a><span class="fu">matplot</span>(<span class="fu">t</span>(ccc), <span class="at">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/plot-5.png" width="672" /></p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="r言語の基本.html#cb121-1" tabindex="-1"></a><span class="co"># 箱ひげ図</span></span>
<span id="cb121-2"><a href="r言語の基本.html#cb121-2" tabindex="-1"></a><span class="fu">boxplot</span>(ccc)</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/plot-6.png" width="672" /></p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="r言語の基本.html#cb122-1" tabindex="-1"></a><span class="fu">boxplot</span>(<span class="fu">t</span>(ccc))</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/plot-7.png" width="672" /></p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="r言語の基本.html#cb123-1" tabindex="-1"></a><span class="co"># 散布図</span></span>
<span id="cb123-2"><a href="r言語の基本.html#cb123-2" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb123-3"><a href="r言語の基本.html#cb123-3" tabindex="-1"></a><span class="fu">pairs</span>(ccc)</span></code></pre></div>
<p><img src="010-Intro_files/figure-html/plot-8.png" width="672" /></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="r言語の基本.html#cb124-1" tabindex="-1"></a><span class="co">#install.packages(&quot;car&quot;)</span></span>
<span id="cb124-2"><a href="r言語の基本.html#cb124-2" tabindex="-1"></a><span class="co">#library(car)</span></span>
<span id="cb124-3"><a href="r言語の基本.html#cb124-3" tabindex="-1"></a><span class="co">#scatterplot(ccc)</span></span>
<span id="cb124-4"><a href="r言語の基本.html#cb124-4" tabindex="-1"></a><span class="co"># install.packages(&quot;scatterplot3d&quot;); library(scatterplot3d)</span></span>
<span id="cb124-5"><a href="r言語の基本.html#cb124-5" tabindex="-1"></a><span class="co"># scatterplot3d</span></span>
<span id="cb124-6"><a href="r言語の基本.html#cb124-6" tabindex="-1"></a></span>
<span id="cb124-7"><a href="r言語の基本.html#cb124-7" tabindex="-1"></a><span class="co"># その他のグラフ</span></span>
<span id="cb124-8"><a href="r言語の基本.html#cb124-8" tabindex="-1"></a><span class="co"># coplot; mosaic plot; stars; faces; persp; image; contour</span></span>
<span id="cb124-9"><a href="r言語の基本.html#cb124-9" tabindex="-1"></a></span>
<span id="cb124-10"><a href="r言語の基本.html#cb124-10" tabindex="-1"></a><span class="co"># その他</span></span>
<span id="cb124-11"><a href="r言語の基本.html#cb124-11" tabindex="-1"></a><span class="co"># windows()     #新しいグラフィック・ウィンドウを開く</span></span>
<span id="cb124-12"><a href="r言語の基本.html#cb124-12" tabindex="-1"></a><span class="co"># par(mfrow = c(2, 2))</span></span>
<span id="cb124-13"><a href="r言語の基本.html#cb124-13" tabindex="-1"></a></span>
<span id="cb124-14"><a href="r言語の基本.html#cb124-14" tabindex="-1"></a><span class="co"># より洗練されたグラフ. やや難易度が高いがモダンなアプローチ</span></span>
<span id="cb124-15"><a href="r言語の基本.html#cb124-15" tabindex="-1"></a><span class="co"># install.packages(&quot;ggplot2&quot;, dependencies = T)</span></span>
<span id="cb124-16"><a href="r言語の基本.html#cb124-16" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb124-17"><a href="r言語の基本.html#cb124-17" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> iris,</span>
<span id="cb124-18"><a href="r言語の基本.html#cb124-18" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length,</span>
<span id="cb124-19"><a href="r言語の基本.html#cb124-19" tabindex="-1"></a>                     <span class="at">y =</span> Petal.Length)) <span class="sc">+</span></span>
<span id="cb124-20"><a href="r言語の基本.html#cb124-20" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> Species)) <span class="sc">+</span></span>
<span id="cb124-21"><a href="r言語の基本.html#cb124-21" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>,</span>
<span id="cb124-22"><a href="r言語の基本.html#cb124-22" tabindex="-1"></a>              <span class="at">colour =</span> <span class="st">&quot;lightblue&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="010-Intro_files/figure-html/plot-9.png" width="672" /></p>
</div>
<div id="ファイル入出力" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> ファイル入出力<a href="r言語の基本.html#ファイル入出力" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="テキストファイル読み込み" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> テキストファイル読み込み<a href="r言語の基本.html#テキストファイル読み込み" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>ファイル読み込み用のR関数には, ファイルの格納場所 (パス) とファイル名を知らせる必要がある</li>
<li>パスを省略すると, 現在のディレクトリ (getwd関数で確認可能) 下でファイルを探す. もし, 存在しなければ, エラーとなる</li>
<li>ここでは, あらかじめ, 各自のPCのデスクトップ上に, “BStat_2024”という名前のフォルダ (ディレクトリ) を作成していると想定</li>
<li>ファイルは, カンマ(, )で区切られたcsv形式や, タブで区切られたtsv形式の テキストファイルであるとする.</li>
</ul>
<pre><code>data1 &lt;- read.table(&quot;/[パス名]/ファイル名&quot;, header = T, row.names = 1)
# オプション
# header = T: 1行目が列ラベル
# row.names = 1: 1列目が行ラベル</code></pre>
<ul>
<li>または, file.path関数を使ってファイルの格納されているパス(経路)を指定しても良い.</li>
</ul>
<pre><code># ユーザー(yamada)が, デスクトップ(Desktop)フォルダの下に授業用フォルダ(BStat_2024)を作成した場合のパスの指定
fpath &lt;- file.path(&quot;~&quot;, &quot;Desktop&quot;, &quot;BStat_2024&quot;)
# または
fpath &lt;- file.path(&quot;Users&quot;, &quot;yamada&quot;, &quot;Desktop&quot;, &quot;BStat_2024&quot;)
#
ifile &lt;- file.path(fpath, &quot;)</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="r言語の基本.html#cb128-1" tabindex="-1"></a><span class="co"># 例えば, </span></span>
<span id="cb128-2"><a href="r言語の基本.html#cb128-2" tabindex="-1"></a><span class="co"># data1 &lt;- read.table(&quot;/Users/[アカウント名]/Desktop/BStat_2024/data.txt&quot;, sep = &quot;, &quot;)</span></span>
<span id="cb128-3"><a href="r言語の基本.html#cb128-3" tabindex="-1"></a><span class="co"># または</span></span>
<span id="cb128-4"><a href="r言語の基本.html#cb128-4" tabindex="-1"></a><span class="co"># data1 &lt;- read.csv(&quot;/Users/[アカウント名]/Desktop/BStat_2024/data.txt&quot;, header = T, row.names = 1)</span></span>
<span id="cb128-5"><a href="r言語の基本.html#cb128-5" tabindex="-1"></a></span>
<span id="cb128-6"><a href="r言語の基本.html#cb128-6" tabindex="-1"></a><span class="co"># 代替的に</span></span>
<span id="cb128-7"><a href="r言語の基本.html#cb128-7" tabindex="-1"></a><span class="co"># data2 &lt;- scan(&quot;/Users/[アカウント名]/Desktop/BStat_2024/data.txt&quot;, sep = &quot;, &quot;)</span></span>
<span id="cb128-8"><a href="r言語の基本.html#cb128-8" tabindex="-1"></a><span class="co">#matrix(scan(&quot;/Users/[アカウント名]/Desktop/BStat_2024/data.txt&quot;, sep = &quot;, &quot;), 3, 4, byrow = T)</span></span>
<span id="cb128-9"><a href="r言語の基本.html#cb128-9" tabindex="-1"></a><span class="co"># matrix(scan(&quot;/Users/[アカウント名]/Desktop/BStat_2024/data.txt&quot;, sep = &quot;, &quot;), 3, 4)</span></span>
<span id="cb128-10"><a href="r言語の基本.html#cb128-10" tabindex="-1"></a></span>
<span id="cb128-11"><a href="r言語の基本.html#cb128-11" tabindex="-1"></a><span class="co"># scan()において, 数値, 文字が混在している場合, 列ごとにデータ属性を指定する必要</span></span>
<span id="cb128-12"><a href="r言語の基本.html#cb128-12" tabindex="-1"></a><span class="co"># data2.txt</span></span>
<span id="cb128-13"><a href="r言語の基本.html#cb128-13" tabindex="-1"></a><span class="co"># a 1 2</span></span>
<span id="cb128-14"><a href="r言語の基本.html#cb128-14" tabindex="-1"></a><span class="co"># b 2 3</span></span>
<span id="cb128-15"><a href="r言語の基本.html#cb128-15" tabindex="-1"></a><span class="co"># c 3 4</span></span>
<span id="cb128-16"><a href="r言語の基本.html#cb128-16" tabindex="-1"></a><span class="co"># data3 &lt;- scan(&quot;/Users/[アカウント名]/Desktop/BStat_2024/data.txt&quot;, sep = &quot;, &quot;, list(x = &quot;&quot;, y = 0, z = 0))</span></span>
<span id="cb128-17"><a href="r言語の基本.html#cb128-17" tabindex="-1"></a><span class="co"># data.frame(data2)     # データフレーム化</span></span>
<span id="cb128-18"><a href="r言語の基本.html#cb128-18" tabindex="-1"></a></span>
<span id="cb128-19"><a href="r言語の基本.html#cb128-19" tabindex="-1"></a><span class="co"># パスを指定せずに, テキストファイルの置かれているフォルダに移動してから</span></span>
<span id="cb128-20"><a href="r言語の基本.html#cb128-20" tabindex="-1"></a><span class="co"># ファイル名のみを使って読み込んでも良い</span></span>
<span id="cb128-21"><a href="r言語の基本.html#cb128-21" tabindex="-1"></a><span class="co"># setwd(&quot;/Users/[アカウント名]/Desktop/BStat_2024&quot;)</span></span>
<span id="cb128-22"><a href="r言語の基本.html#cb128-22" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;data.txt&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb128-23"><a href="r言語の基本.html#cb128-23" tabindex="-1"></a></span>
<span id="cb128-24"><a href="r言語の基本.html#cb128-24" tabindex="-1"></a><span class="co"># パッケージ&quot;foreign&quot;により, SAS, SPSS等のファイル形式のデータの読み込みが可能</span></span></code></pre></div>
</div>
<div id="テキストファイル書き出し" class="section level3 hasAnchor" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> テキストファイル書き出し<a href="r言語の基本.html#テキストファイル書き出し" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>write(data3, &quot;/[パス名]/ファイル名&quot;)</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="r言語の基本.html#cb130-1" tabindex="-1"></a><span class="co"># 例えば, </span></span>
<span id="cb130-2"><a href="r言語の基本.html#cb130-2" tabindex="-1"></a><span class="co"># write.table(data3, &quot;/Users/[アカウント名]/Desktop/BStat_2024/data3_out1.txt&quot;)</span></span>
<span id="cb130-3"><a href="r言語の基本.html#cb130-3" tabindex="-1"></a><span class="co"># write.table(data3, &quot;/Users/[アカウント名]/Desktop/BStat_2024/data3_out1.txt&quot;, append = T)</span></span>
<span id="cb130-4"><a href="r言語の基本.html#cb130-4" tabindex="-1"></a><span class="co"># write.csv()</span></span>
<span id="cb130-5"><a href="r言語の基本.html#cb130-5" tabindex="-1"></a></span>
<span id="cb130-6"><a href="r言語の基本.html#cb130-6" tabindex="-1"></a><span class="co"># sink(&quot;/Users/[アカウント名]/Desktop/BStat_2024/data3_out1.txt&quot;)</span></span>
<span id="cb130-7"><a href="r言語の基本.html#cb130-7" tabindex="-1"></a>data1; data2</span>
<span id="cb130-8"><a href="r言語の基本.html#cb130-8" tabindex="-1"></a><span class="fu">sink</span>()</span></code></pre></div>

</div>
</div>
<div id="パッケージtidyverse" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> パッケージ<code>tidyverse</code><a href="r言語の基本.html#パッケージtidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>tidyverse</code>は, Hadley Wickhamによって開発が進められているRパッケージ (群) である. データのインポート, 整理, 加工, 可視化, 分析を簡単かつ効率的に行うための一連のツールを提供する. <code>tidyverse</code>の中核をなすパッケージには以下のものがある:</p>
<ul>
<li><p><strong>ggplot2</strong>: データの可視化を行うためのパッケージ. レイヤーの概念を用い, データポイント, 統計的変換, スケール, 軸, 凡例など, グラフの各要素を個別に定義し, 組み合わせることができる. これにより, 高度にカスタマイズされたグラフを容易に作成可能.</p></li>
<li><p><strong>dplyr</strong>: データの操作と変形を行うためのパッケージ. フィルタリング, 並べ替え, 集約など, データフレームに対する一般的な操作を簡単かつ直感的に行うための関数を提供.</p></li>
<li><p><strong>tidyr</strong>: データの整理と整形を簡単にするためのパッケージ. データセットのレイアウトを整形する等のクリーニングのタスクに対応しながら,「tidy形式」としてデータを再構築するツールを提供. 例えば, データを多数の列に広げる「wide形式」と データをより少ない列にまとめるが行を増やす「long形式」間の変換, 欠損値への適切な対処, 一列を複数列に分割あるいは複数列を一列に結合する等の処理.</p></li>
</ul>
<!--
`tidyverse`の思想の中心に位置する「tidy data」の概念に基づいてデータをtidy形式に変換 (tidy形式は, 各変数が列を形成し, 各観測値が独立した行を形成する, データ分析やデータ可視化に適したデータ形式). tidy形式によりデータ分析や可視化を直感的かつ簡易に実行可能となる.
-->
<ul>
<li><strong>readr</strong>: さまざまな形式のテキストデータ (例えば, csv, tsv形式) を読み込み, Rのデータフレームとして効率的にインポートするためのパッケージ. 標準のR関数よりも高速に動作し, ファイルの読み込み時によくある問題 (データ型の自動認識, 欠損値の扱い等) をより柔軟に処理.</li>
</ul>
<p>さらに, 便利な機能を持つパッケージとして,</p>
<ul>
<li><p><strong>purrr</strong>: リストと関数型プログラミングを扱うためのパッケージ. リストの操作, 要素の繰り返し処理, 条件に基づく要素の抽出など, 複雑なデータ構造の操作を簡単にする関数を提供.</p></li>
<li><p><strong>tibble</strong>: データフレームをより現代的かつ柔軟に扱うためのパッケージで, 印刷時の見やすさ, 列名の非標準的な文字の扱い, サブセット操作の改善など, データフレームを強化し使いやすさを改善.</p></li>
<li><p><strong>stringr</strong>: 文字列データの操作を行うためのパッケージ. Rの標準文字列操作機能よりも一貫性と可読性に優れたインターフェースを提供し、文字列の検索, 置換, 分割, 結合などのタスクを簡単に行うことが可能.</p></li>
<li><p><strong>forcats</strong>: 因子 (カテゴリカルデータ) を扱うためのパッケージ. 因子水準の順序変更, 要約, 結合, 分離など, 因子型のデータを操作するための便利な関数を提供.</p></li>
<li><p><strong>lubridate</strong>: 日付と時刻のデータを扱うためのパッケージ. 日付や時刻の加算・減算, 部分的な抽出, 時間差の計算など, 操作を直感的かつ効率的にするための関数を提供.</p></li>
</ul>
<p><code>tidyverse</code>は, データを「tidy」（整然とした）形式で扱うことに焦点を当てている. tidyデータの原則では, 各変数が列に, 各観測値が行に, 各種類の観測単位がテーブルに配置される. この原則に従うことで, データ分析がより直感的で効率的になる.</p>
<p><code>tidyverse</code>パッケージは, Rでのデータ分析作業を容易にし, コードをより読みやすく, 書きやすくすることを指向している. それぞれのパッケージは単独で使用することも出来るが, 一緒に使用することでより使い勝手が向上し便利である. データサイエンスにおける日常的なタスクを簡潔に, かつ効率的に行うための強力なツールセットと言える.</p>
<ul>
<li><code>tidyverse</code>のホームページ
<a href="https://tidyverse.tidyverse.org/">https://tidyverse.tidyverse.org/</a></li>
</ul>
<div id="q-rの初心者はtidyverseから勉強することは可能か" class="section level3 hasAnchor" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Q: Rの初心者は<code>tidyverse</code>から勉強することは可能か?<a href="r言語の基本.html#q-rの初心者はtidyverseから勉強することは可能か" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>今日では, R言語の基本を学ばずにいきなり<code>tidyverse</code>から勉強することは, <code>tidyverse</code>を入口としてR言語の学習を始めるユーザーも多いと思われる.
特にデータ分析やデータサイエンスに焦点を当てている初心者にとっては代替的な選択肢である. <code>tidyverse</code>は, データの取り扱いを直感的かつ効率的にすることを目的として設計されており, その構文は初心者にとって学びやすいように工夫されている.</p>
<ul>
<li><code>tidyverse</code>の利点:
<ul>
<li>直感的な構文: <code>tidyverse</code>の関数は覚えやすく, 理解しやすい構文を持っているため, R言語の初心者でも扱いやすい.</li>
<li>データ分析のワークフローを強化: <code>tidyverse</code>はデータのインポート, 整理, 加工, 可視化, 分析という一連のデータ分析プロセスに対応するツールを提供する. これにより, データ分析の基本的な流れを簡単に学ぶことができる.</li>
<li>広範なコミュニティとサポート: <code>tidyverse</code>はRユーザー内に多くの熱狂的なファンがいて, コミュニティを形成している. オンラインでのサポートや学習リソースが豊富にある.</li>
</ul></li>
<li>注意点:
<ul>
<li>R言語の基本概念の理解の必要性: R言語の基本的な概念 (変数の割り当て, 関数の使用方法, データ型など) は、<code>tidyverse</code>を効率的に使用するためにも理解しておく必要あり.</li>
<li>限定的な機能: <code>tidyverse</code>だけではカバーできないR言語の機能も多くある. すなわち, <code>tidyverse</code>から学習を始めても, いずれはR言語のより広範な機能やパッケージにも目を向けることが必要.</li>
</ul></li>
</ul>
<p><strong>tidyverseに含まれるパッケージを利用すると, 確かに多くの複雑な処理が簡潔かつエレガントに書けたりすることがあり, その機能性を実感することも多い. しかし, Rプログラミングを行っている中で, R言語の基本を知らないと困るようなことの方が多い. よって, 筆者の考えでは, Rの初学者はいきなりtidyverse系を軸に学習を開始するよりは, tidyverseに含まれるパッケージはあくまでRの多数あるパッケージの一部であると位置付けて, 標準的なRを学びながらこれらのパッケージの用法を学ぶというスタンスで良い. 本コースは, tidyverse系の扱いはこのような方針に従って進めるものとする.</strong></p>
</div>
<div id="tidyverseの基本" class="section level3 hasAnchor" number="2.7.2">
<h3><span class="header-section-number">2.7.2</span> <code>tidyverse</code>の基本<a href="r言語の基本.html#tidyverseの基本" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!--注) 以下のサンプルコードは, ChatGPT (GPT-4) により生成させたものである.-->
<p><em>サンプルコードの出所</em>: ChatGPT (GPT-4)</p>
<p>以下, <code>tidyverse</code>の基本を理解するために, データのインポート, 加工, そして可視化のステップを含むシンプルなチュートリアルを紹介する.
ここでは, <code>tidyverse</code>の中の<code>readr</code>, <code>dplyr</code>, <code>ggplot2</code>の三つのパッケージを使用する.
これらは<code>tidyverse</code>の中で最もよく使用されるパッケージである.</p>
<p><strong>ステップ 1: <code>tidyverse</code>をインストールして読み込む</strong></p>
<p>まず, <code>tidyverse</code>パッケージをインストールし, ライブラリに読み込む.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="r言語の基本.html#cb131-1" tabindex="-1"></a><span class="co"># tidyverseパッケージのインストール</span></span>
<span id="cb131-2"><a href="r言語の基本.html#cb131-2" tabindex="-1"></a><span class="co"># install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb131-3"><a href="r言語の基本.html#cb131-3" tabindex="-1"></a></span>
<span id="cb131-4"><a href="r言語の基本.html#cb131-4" tabindex="-1"></a><span class="co"># ライブラリに読み込む</span></span>
<span id="cb131-5"><a href="r言語の基本.html#cb131-5" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.4     ✔ readr     2.1.5
## ✔ forcats   1.0.0     ✔ stringr   1.5.1
## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
## ✔ purrr     1.0.2     
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<p><strong>ステップ 2: データをインポートする</strong></p>
<p><code>tidyverse</code>には様々なサンプルデータが含まれている. ここでは, <code>mtcars</code>データセットを使用する. <code>mtcars</code>は, 1974年のMotor Trend US誌に掲載された32台の自動車に関するデータである.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="r言語の基本.html#cb133-1" tabindex="-1"></a><span class="co"># mtcarsデータセットを使用する</span></span>
<span id="cb133-2"><a href="r言語の基本.html#cb133-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> mtcars</span></code></pre></div>
<p><strong>ステップ 3: データを加工する</strong>
<code>dplyr</code>を使用してデータを加工する. ここでは, mpg（ガロンあたりのマイル数）が20を超える車両のみを選択し、cyl（シリンダー数）ごとの平均mpgを計算する.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="r言語の基本.html#cb134-1" tabindex="-1"></a><span class="co"># dplyrを使ってデータをフィルタリングし、集約する</span></span>
<span id="cb134-2"><a href="r言語の基本.html#cb134-2" tabindex="-1"></a>filtered_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb134-3"><a href="r言語の基本.html#cb134-3" tabindex="-1"></a>  <span class="fu">filter</span>(mpg <span class="sc">&gt;</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb134-4"><a href="r言語の基本.html#cb134-4" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb134-5"><a href="r言語の基本.html#cb134-5" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_mpg =</span> <span class="fu">mean</span>(mpg))</span>
<span id="cb134-6"><a href="r言語の基本.html#cb134-6" tabindex="-1"></a></span>
<span id="cb134-7"><a href="r言語の基本.html#cb134-7" tabindex="-1"></a><span class="co"># 結果を表示</span></span>
<span id="cb134-8"><a href="r言語の基本.html#cb134-8" tabindex="-1"></a><span class="fu">print</span>(filtered_data)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##     cyl mean_mpg
##   &lt;dbl&gt;    &lt;dbl&gt;
## 1     4     26.7
## 2     6     21.1</code></pre>
<p><strong>ステップ 4: データを可視化する</strong></p>
<p>最後に, <code>ggplot2</code>を使ってデータの可視化を行う.
ここでは, cylごとのmean_mpgを棒グラフで表示する.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="r言語の基本.html#cb136-1" tabindex="-1"></a><span class="co"># ggplot2を使ってデータを可視化</span></span>
<span id="cb136-2"><a href="r言語の基本.html#cb136-2" tabindex="-1"></a><span class="fu">ggplot</span>(filtered_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(cyl), <span class="at">y =</span> mean_mpg)) <span class="sc">+</span></span>
<span id="cb136-3"><a href="r言語の基本.html#cb136-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb136-4"><a href="r言語の基本.html#cb136-4" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb136-5"><a href="r言語の基本.html#cb136-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Cylinder-wise Mean MPG&quot;</span>,</span>
<span id="cb136-6"><a href="r言語の基本.html#cb136-6" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Number of Cylinders&quot;</span>,</span>
<span id="cb136-7"><a href="r言語の基本.html#cb136-7" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Mean MPG&quot;</span>)</span></code></pre></div>
<p><img src="014-Intro_tidyverse_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>関数<code>ggplot()</code>の別の使用例として, マルチパネル化した散布図を示す.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="r言語の基本.html#cb137-1" tabindex="-1"></a><span class="co"># データを可視化する</span></span>
<span id="cb137-2"><a href="r言語の基本.html#cb137-2" tabindex="-1"></a><span class="co"># mpgとhpの関係を示す散布図を作成し、cylごとに異なるパネルに表示する</span></span>
<span id="cb137-3"><a href="r言語の基本.html#cb137-3" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> mpg, <span class="at">y =</span> hp)) <span class="sc">+</span></span>
<span id="cb137-4"><a href="r言語の基本.html#cb137-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb137-5"><a href="r言語の基本.html#cb137-5" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>cyl) <span class="sc">+</span></span>
<span id="cb137-6"><a href="r言語の基本.html#cb137-6" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb137-7"><a href="r言語の基本.html#cb137-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;gray&quot;</span>)) <span class="sc">+</span></span>
<span id="cb137-8"><a href="r言語の基本.html#cb137-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scatterplot of MPG vs HP by Cylinder&quot;</span>,</span>
<span id="cb137-9"><a href="r言語の基本.html#cb137-9" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Miles Per Gallon (MPG)&quot;</span>,</span>
<span id="cb137-10"><a href="r言語の基本.html#cb137-10" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Horsepower (HP)&quot;</span>)</span></code></pre></div>
<p><img src="014-Intro_tidyverse_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="線形回帰分析.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
